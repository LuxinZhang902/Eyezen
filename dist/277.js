"use strict";(self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[]).push([[277],{277:(e,t,r)=>{r.r(t),r.d(t,{default:()=>n});var s=r(848),a=r(540);const n=({isVisible:e,onClose:t,onLogin:r,onSignup:n})=>{const[o,l]=(0,a.useState)(!0),[i,c]=(0,a.useState)(""),[d,m]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[g,h]=(0,a.useState)(!1),[p,f]=(0,a.useState)(""),[b,y]=(0,a.useState)(!1),[w,j]=(0,a.useState)(""),[v,N]=(0,a.useState)(!1),[C,k]=(0,a.useState)(""),[S,E]=(0,a.useState)(!1),[z,P]=(0,a.useState)(""),[L,V]=(0,a.useState)(""),[A,M]=(0,a.useState)(""),[_,q]=(0,a.useState)(!1);if(!e)return null;const B=()=>{c(""),m(""),x(""),f(""),y(!1),j(""),N(!1),k(""),E(!1),P(""),V(""),M(""),q(!1)};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-80 max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:S?"Reset Password":o?"Login":"Sign Up"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl",children:"Ã—"})]}),b&&!v?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("svg",{className:"w-16 h-16 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Email Sent!"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["We've sent a verification code to ",(0,s.jsx)("strong",{children:i}),". Please check your inbox for the 6-digit code."]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Don't see the email? Check your spam folder."}),(0,s.jsx)("button",{onClick:()=>N(!0),className:"mt-4 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors",children:"Enter Verification Code"})]}):v?(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),f("");try{w===C?(await new Promise(e=>setTimeout(e,1e3)),n(i,d,u),t(),B()):f("Invalid verification code. Please try again.")}catch(e){f(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Enter Verification Code"}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:["We sent a 6-digit code to ",(0,s.jsx)("strong",{children:i})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),(0,s.jsx)("input",{type:"text",value:w,onChange:e=>j(e.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-lg tracking-widest",required:!0,placeholder:"000000",maxLength:6,disabled:g})]}),p&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:p}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{N(!1),y(!1),j(""),f("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:g||6!==w.length,className:"flex-1 bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify & Sign Up"})]})]}):S&&!_?(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),f("");try{if(!((await chrome.storage.local.get(["eyezen_users"])).eyezen_users||{})[i])throw new Error("No account found with this email address.");await new Promise(e=>setTimeout(e,1500));const e=Math.floor(1e5+9e5*Math.random()).toString();P(e),q(!0),console.log(`Password reset code sent to ${i}: ${e}`)}catch(e){f(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,s.jsx)("input",{type:"email",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter your email address",disabled:g})]}),p&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:p}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{E(!1),f("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:g||!i,className:"flex-1 bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Code..."]}):"Send Reset Code"})]})]}):_?(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),f("");try{if(w!==z)throw new Error("Invalid reset code. Please try again.");if(L.length<6)throw new Error("Password must be at least 6 characters long.");if(L!==A)throw new Error("Passwords do not match.");const e=(await chrome.storage.local.get(["eyezen_users"])).eyezen_users||{};e[i]&&(e[i].password=L,await chrome.storage.local.set({eyezen_users:e}),B(),E(!1),alert("Password reset successfully! You can now login with your new password."))}catch(e){f(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reset Code"}),(0,s.jsx)("input",{type:"text",value:w,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);j(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000",maxLength:6,required:!0,disabled:g})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,s.jsx)("input",{type:"password",value:L,onChange:e=>V(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter new password",minLength:6,disabled:g})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,s.jsx)("input",{type:"password",value:A,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Confirm new password",minLength:6,disabled:g})]}),p&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:p}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{q(!1),E(!0),f("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:g||6!==w.length||!L||!A,className:"flex-1 bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting..."]}):"Reset Password"})]})]}):(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),h(!0),f("");try{if(o)await r(i,d),t();else{await new Promise(e=>setTimeout(e,1500));const e=Math.floor(1e5+9e5*Math.random()).toString();k(e),y(!0),N(!0),console.log(`Verification code sent to ${i}: ${e}`)}}catch(e){f(e instanceof Error?e.message:"An error occurred")}finally{h(!1)}},className:"space-y-4",children:[!o&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:u,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!o,placeholder:"Enter your name",disabled:g})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",value:i,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter your email",disabled:g})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,s.jsx)("input",{type:"password",value:d,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter your password",minLength:6,disabled:g})]}),p&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:p}),(0,s.jsx)("button",{type:"submit",disabled:g,className:"w-full bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o?"Logging in...":"Creating Account..."]}):o?"Login":"Sign Up"}),o&&(0,s.jsx)("div",{className:"mt-3 text-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>E(!0),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Forgot Password?"})})]}),!v&&!S&&(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)("button",{onClick:()=>{l(!o),B()},className:"text-green-600 hover:text-green-700 text-sm font-medium",children:o?"Don't have an account? Sign up":"Already have an account? Login"})})]})})}}}]);