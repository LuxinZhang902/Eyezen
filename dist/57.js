"use strict";(self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[]).push([[57],{57:(e,s,a)=>{a.r(s),a.d(s,{default:()=>o});var r=a(848),t=a(540),n=a(123);const o=({isVisible:e,onApprove:s,onReject:a,onClose:o})=>{const[i,l]=(0,t.useState)(!1);(0,t.useEffect)(()=>{e&&l(!0)},[e]);const c=()=>{l(!1),setTimeout(()=>{o()},200)};return e?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black transition-opacity duration-200 "+(i?"opacity-50":"opacity-0"),onClick:c}),(0,r.jsxs)("div",{className:"relative bg-white rounded-lg shadow-xl max-w-sm mx-4 transform transition-all duration-200 "+(i?"scale-100 opacity-100":"scale-95 opacity-0"),children:[(0,r.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-emerald-600 text-white p-4 rounded-t-lg",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold",children:"Camera Permission Required"}),(0,r.jsx)("p",{className:"text-sm opacity-90",children:"EyeZen wants to monitor your eye health"})]})]})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 mb-3",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-orange-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Camera access needed for AI features"})]}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm leading-relaxed",children:[(0,r.jsx)("strong",{children:"Your privacy is protected"})," - no video is recorded or transmitted, and images are only used for one-time analysis."]}),(0,r.jsx)("button",{onClick:()=>alert('ðŸ“¹ Detailed Setup Instructions:\n\n1. Click "Allow Camera Access" below\n2. Chrome will show a permission dialog\n3. Select "Always allow" for reliable access\n4. If dialog closes quickly, manually set permissions:\n   â€¢ Click camera icon in Chrome address bar\n   â€¢ Select "Always allow"\n   â€¢ Refresh this extension'),className:"text-xs text-blue-600 hover:text-blue-800 underline mt-2 transition-colors",children:"View detailed setup instructions â†’"})]}),(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 mb-4",children:(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("svg",{className:"w-5 h-5 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-medium text-blue-800",children:"Next Step"}),(0,r.jsx)("p",{className:"text-xs text-blue-700 mt-1",children:'Clicking "Allow Camera Access" will show Chrome\'s permission dialog. Choose "Allow" there to enable full AI features.'})]})]})})]}),(0,r.jsxs)("div",{className:"px-6 pb-6",children:[(0,r.jsxs)("div",{className:"flex space-x-3",children:[(0,r.jsx)("button",{onClick:async()=>{try{await n.ChromeStorageService.updateSettings({cameraEnabled:!1,metricsOnly:!0}),a(),c()}catch(e){console.error("Failed to reject camera access:",e)}},className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-gray-300",children:"Reject"}),(0,r.jsx)("button",{onClick:async()=>{try{(await chrome.runtime.getContexts({})).find(e=>"OFFSCREEN_DOCUMENT"===e.contextType)||await chrome.offscreen.createDocument({url:"offscreen.html",reasons:[chrome.offscreen.Reason.USER_MEDIA],justification:"Camera access for eye health monitoring"});const e=await new Promise((e,s)=>{chrome.runtime.sendMessage({type:"REQUEST_CAMERA"},a=>{chrome.runtime.lastError?s(new Error(chrome.runtime.lastError.message)):a?e(a):s(new Error("No response received from offscreen document"))})});if(e.success)await n.ChromeStorageService.updateSettings({cameraEnabled:!0,metricsOnly:!1}),console.log("Camera activated successfully"),alert("ðŸŽ‰ Camera access granted! Full AI-powered eye health monitoring is now active."),s();else{console.warn("Camera access denied:",e.error),await n.ChromeStorageService.updateSettings({cameraEnabled:!1,metricsOnly:!0});const a=`${e.error||"Camera access was denied."}\n\nðŸ’¡ To enable full AI features later:\n1. Click the camera icon in Chrome's address bar\n2. Select "Always allow" for camera access\n3. Reload the extension\n\nFor now, you can still use basic timer reminders.`;alert(a),s()}}catch(e){console.error("Failed to approve camera access:",e),s()}},className:"flex-1 px-4 py-2 bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-green-300",children:"Allow Camera Access"})]}),(0,r.jsx)("p",{className:"text-xs text-gray-500 text-center mt-3 whitespace-nowrap",children:"You can change this setting anytime in the extension options."})]})]})]}):null}}}]);