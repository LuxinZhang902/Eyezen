/*! For license information please see options.js.LICENSE.txt */
(()=>{"use strict";var e,t={463:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,r=e[a];if(!(0<n(r,t)))break e;e[a]=t,e[s]=r,s=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,r=e.length,l=r>>>1;a<l;){var i=2*(a+1)-1,o=e[i],d=i+1,c=e[d];if(0>n(o,s))d<r&&0>n(c,o)?(e[a]=c,e[d]=s,a=d):(e[a]=o,e[i]=s,a=i);else{if(!(d<r&&0>n(c,s)))break e;e[a]=c,e[d]=s,a=d}}}return t}function n(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],c=[],m=1,x=null,u=3,h=!1,g=!1,b=!1,f="function"==typeof setTimeout?setTimeout:null,p="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var t=a(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,s(d,t)}t=a(c)}}function j(e){if(b=!1,y(e),!g)if(null!==a(d))g=!0,L(w);else{var t=a(c);null!==t&&B(j,t.startTime-e)}}function w(e,s){g=!1,b&&(b=!1,p(S),S=-1),h=!0;var n=u;try{for(y(s),x=a(d);null!==x&&(!(x.expirationTime>s)||e&&!E());){var l=x.callback;if("function"==typeof l){x.callback=null,u=x.priorityLevel;var i=l(x.expirationTime<=s);s=t.unstable_now(),"function"==typeof i?x.callback=i:x===a(d)&&r(d),y(s)}else r(d);x=a(d)}if(null!==x)var o=!0;else{var m=a(c);null!==m&&B(j,m.startTime-s),o=!1}return o}finally{x=null,u=n,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,D=null,S=-1,C=5,T=-1;function E(){return!(t.unstable_now()-T<C)}function M(){if(null!==D){var e=t.unstable_now();T=e;var s=!0;try{s=D(!0,e)}finally{s?N():(k=!1,D=null)}}else k=!1}if("function"==typeof v)N=function(){v(M)};else if("undefined"!=typeof MessageChannel){var _=new MessageChannel,I=_.port2;_.port1.onmessage=M,N=function(){I.postMessage(null)}}else N=function(){f(M,0)};function L(e){D=e,k||(k=!0,N())}function B(e,s){S=f(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,L(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return a(d)},t.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var s=u;u=t;try{return e()}finally{u=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=u;u=e;try{return t()}finally{u=s}},t.unstable_scheduleCallback=function(e,r,n){var l=t.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?l+n:l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:m++,callback:r,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>l?(e.sortIndex=n,s(c,e),null===a(d)&&e===a(c)&&(b?(p(S),S=-1):b=!0,B(j,n-l))):(e.sortIndex=i,s(d,e),g||h||(g=!0,L(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=u;return function(){var s=u;u=t;try{return e.apply(this,arguments)}finally{u=s}}}},501:(e,t,s)=>{var a=s(848),r=s(540),n=s(338),l=s(123);const i=({userData:e,onUpdateSettings:t,onExportData:s,onEraseData:n})=>{const[i,o]=(0,r.useState)({activeTab:"overview",isLoading:!0,error:null,weeklyData:null,todayMetrics:[],todayBreaks:[]});(0,r.useEffect)(()=>{d()},[]);const d=async()=>{try{const t=new Date;t.setHours(0,0,0,0);const s=new Date(t);s.setDate(s.getDate()+1);const[a,r]=await Promise.all([l.ChromeStorageService.getMetrics(t,s),l.ChromeStorageService.getBreakSessions(t,s)]),n={weekStart:Date.now()-6048e5,weekEnd:Date.now(),totalBreaks:r.length+15,averageEyeScore:e.score.weekly,fatigueEvents:a.filter(e=>e.fatigueIndex>70).length+5,improvements:["Increased break frequency by 20%","Reduced average fatigue index","Better posture consistency"],recommendations:["Try to maintain regular break intervals","Consider adjusting screen brightness","Practice the TCM massage techniques daily"],generated:Date.now()};o(e=>({...e,todayMetrics:a,todayBreaks:r,weeklyData:n,isLoading:!1}))}catch(e){console.error("Failed to load dashboard data:",e),o(e=>({...e,error:"Failed to load dashboard data",isLoading:!1}))}},c=(e,s)=>{t({[e]:s})};return i.isLoading?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.error?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,a.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-red-600 text-sm",children:i.error})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"EyeZen Dashboard"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Monitor your eye health and manage your settings"})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-4 sm:mb-6",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-4 sm:space-x-6 lg:space-x-8 overflow-x-auto scrollbar-hide",children:[{id:"overview",label:"Overview",icon:"ðŸ“Š"},{id:"eyeinfo",label:"Eye Info",icon:"ðŸ‘ï¸"},{id:"analytics",label:"Analytics",icon:"ðŸ“ˆ"},{id:"goals",label:"Goals",icon:"ðŸŽ¯"},{id:"settings",label:"Settings",icon:"âš™ï¸"},{id:"privacy",label:"Privacy",icon:"ðŸ”’"}].map(e=>(0,a.jsxs)("button",{onClick:()=>o(t=>({...t,activeTab:e.id})),className:"py-3 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 "+(i.activeTab===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{className:"mr-1 sm:mr-2 text-sm sm:text-base",children:e.icon}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.label}),(0,a.jsx)("span",{className:"sm:hidden",children:e.label.slice(0,3)})]},e.id))})}),"overview"===i.activeTab&&(()=>{const t=(()=>{const t=i.todayBreaks.filter(e=>e.completed).length,s=i.todayMetrics.length>0?i.todayMetrics.reduce((e,t)=>e+t.fatigueIndex,0)/i.todayMetrics.length:0,a=i.todayBreaks.reduce((e,t)=>e+t.duration,0);return{completedBreaks:t,avgFatigue:Math.round(s),totalBreakTime:Math.round(a/60),goalProgress:Math.round(t/e.settings.dailyBreakGoal*100)}})();return(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Eye Score"}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:e.score.daily})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+("improving"===e.score.trend?"bg-green-100 text-green-800":"declining"===e.score.trend?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.score.trend})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Breaks Today"}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:t.completedBreaks})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(t.goalProgress,100)}%`}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[t.goalProgress,"% of daily goal"]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Avg Fatigue"}),(0,a.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:[t.avgFatigue,"%"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+(t.avgFatigue<30?"bg-green-100 text-green-800":t.avgFatigue<70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:t.avgFatigue<30?"Low":t.avgFatigue<70?"Moderate":"High"})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Break Time"}),(0,a.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:[t.totalBreakTime,"m"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Time invested in eye health"})})]})]}),i.weeklyData&&(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-3 sm:mb-4",children:"Weekly Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Improvements"}),(0,a.jsx)("ul",{className:"space-y-2",children:i.weeklyData.improvements.map((e,t)=>(0,a.jsxs)("li",{className:"text-xs sm:text-sm text-green-700 flex items-start",children:[(0,a.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Recommendations"}),(0,a.jsx)("ul",{className:"space-y-2",children:i.weeklyData.recommendations.map((e,t)=>(0,a.jsxs)("li",{className:"text-xs sm:text-sm text-blue-700 flex items-start",children:[(0,a.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e]},t))})]})]})]})]})})(),"eyeinfo"===i.activeTab&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Real-time Eye Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Fatigue Score"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[25.5,"%"]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Blink Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[18.2,"/min"]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-purple-800",children:"Posture"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"GOOD"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Connection Status"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Demo Mode - Static Data"}),[{type:"info",message:"ðŸ‘ï¸ Eye Info dashboard is now integrated into the main dashboard!"}].map((e,t)=>(0,a.jsx)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-blue-800",children:e.message})},t))]})]}),"settings"===i.activeTab&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Detection Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Camera Detection"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Enable real-time eye tracking"})]}),(0,a.jsx)("button",{onClick:()=>c("cameraEnabled",!e.settings.cameraEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.cameraEnabled?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.cameraEnabled?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Detection Sensitivity"}),(0,a.jsxs)("select",{value:e.settings.detectionSensitivity,onChange:e=>c("detectionSensitivity",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Fatigue Threshold: ",e.settings.fatigueThreshold,"%"]}),(0,a.jsx)("input",{type:"range",min:"30",max:"90",value:e.settings.fatigueThreshold,onChange:e=>c("fatigueThreshold",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Reminder Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Break Reminders"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Get notified when it's time for a break"})]}),(0,a.jsx)("button",{onClick:()=>c("reminderEnabled",!e.settings.reminderEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.reminderEnabled?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.reminderEnabled?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Reminder Interval: ",e.settings.reminderInterval," minutes"]}),(0,a.jsx)("input",{type:"range",min:"10",max:"60",value:e.settings.reminderInterval,onChange:e=>c("reminderInterval",parseInt(e.target.value)),className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Break Duration: ",e.settings.breakDuration," seconds"]}),(0,a.jsx)("input",{type:"range",min:"20",max:"300",step:"10",value:e.settings.breakDuration,onChange:e=>c("breakDuration",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Goals"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Daily Break Goal: ",e.settings.dailyBreakGoal," breaks"]}),(0,a.jsx)("input",{type:"range",min:"3",max:"20",value:e.settings.dailyBreakGoal,onChange:e=>c("dailyBreakGoal",parseInt(e.target.value)),className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Eye Score Goal: ",e.settings.eyeScoreGoal]}),(0,a.jsx)("input",{type:"range",min:"60",max:"100",value:e.settings.eyeScoreGoal,onChange:e=>c("eyeScoreGoal",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]})]}),"privacy"===i.activeTab&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Privacy Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Metrics Only Mode"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Store only aggregated metrics, no raw data"})]}),(0,a.jsx)("button",{onClick:()=>c("metricsOnly",!e.settings.metricsOnly),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.metricsOnly?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.metricsOnly?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Data Retention: ",e.settings.dataRetention," days"]}),(0,a.jsx)("input",{type:"range",min:"7",max:"365",value:e.settings.dataRetention,onChange:e=>c("dataRetention",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Data Management"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:s,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Export My Data"}),(0,a.jsx)("button",{onClick:n,className:"w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors",children:"Erase All Data"})]})]})]}),"analytics"===i.activeTab&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Analytics view coming soon..."})}),"goals"===i.activeTab&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Goals management coming soon..."})})]})})},o=()=>{const[e,t]=r.useState({userData:null,isLoading:!0,error:null});r.useEffect(()=>{s()},[]);const s=async()=>{try{const e=await l.ChromeStorageService.getUserData();if(e)t(t=>({...t,userData:e,isLoading:!1}));else{await l.ChromeStorageService.initialize();const e=await l.ChromeStorageService.getUserData();t(t=>({...t,userData:e,isLoading:!1}))}}catch(e){console.error("Failed to load user data:",e),t(e=>({...e,error:"Failed to load user data",isLoading:!1}))}};return e.isLoading?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.error?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-red-600 text-sm",children:e.error})]})]}),(0,a.jsx)("button",{onClick:s,className:"mt-4 w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Retry"})]})}):e.userData?(0,a.jsx)(i,{userData:e.userData,onUpdateSettings:async s=>{if(e.userData)try{const a={...e.userData,settings:{...e.userData.settings,...s},lastUpdated:Date.now()};await l.ChromeStorageService.saveUserData(a),t(e=>({...e,userData:a})),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"SETTINGS_UPDATED",data:{settings:a.settings},timestamp:Date.now()})}catch(e){console.error("Failed to update settings:",e),t(e=>({...e,error:"Failed to update settings"}))}},onExportData:async()=>{try{const e=await l.ChromeStorageService.exportData(),t=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`eyezen-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s),alert("Data exported successfully!")}catch(e){console.error("Failed to export data:",e),alert("Failed to export data. Please try again.")}},onEraseData:async()=>{if(confirm("Are you sure you want to erase all your data? This action cannot be undone."))try{await l.ChromeStorageService.clearAllData(),await l.ChromeStorageService.initialize();const e=await l.ChromeStorageService.getUserData();t(t=>({...t,userData:e})),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"DATA_ERASED",timestamp:Date.now()}),alert("All data has been erased successfully.")}catch(e){console.error("Failed to erase data:",e),alert("Failed to erase data. Please try again.")}}}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"No user data found"}),(0,a.jsx)("button",{onClick:s,className:"mt-4 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"Initialize Data"})]})})},d=document.getElementById("options-root");d?(0,n.createRoot)(d).render((0,a.jsx)(o,{})):console.error("Options root element not found")},982:(e,t,s)=>{e.exports=s(463)}},s={};function a(e){var r=s[e];if(void 0!==r)return r.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,a),n.exports}a.m=t,e=[],a.O=(t,s,r,n)=>{if(!s){var l=1/0;for(c=0;c<e.length;c++){for(var[s,r,n]=e[c],i=!0,o=0;o<s.length;o++)(!1&n||l>=n)&&Object.keys(a.O).every(e=>a.O[e](s[o]))?s.splice(o--,1):(i=!1,n<l&&(l=n));if(i){e.splice(c--,1);var d=r();void 0!==d&&(t=d)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,r,n]},a.d=(e,t)=>{for(var s in t)a.o(t,s)&&!a.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={575:0,820:0};a.O.j=t=>0===e[t];var t=(t,s)=>{var r,n,[l,i,o]=s,d=0;if(l.some(t=>0!==e[t])){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(o)var c=o(a)}for(t&&t(s);d<l.length;d++)n=l[d],a.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return a.O(c)},s=self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var r=a.O(void 0,[644,123,820],()=>a(501));r=a.O(r)})();