(()=>{"use strict";var e,s={501:(e,s,t)=>{var a=t(848),r=t(540),l=t(338),n=t(123);const i=({userData:e,onUpdateSettings:s,onExportData:t,onEraseData:l})=>{const[i,d]=(0,r.useState)({activeTab:"overview",isLoading:!0,error:null,weeklyData:null,todayMetrics:[],todayBreaks:[]});(0,r.useEffect)(()=>{o()},[]);const o=async()=>{try{const s=new Date;s.setHours(0,0,0,0);const t=new Date(s);t.setDate(t.getDate()+1);const[a,r]=await Promise.all([n.ChromeStorageService.getMetrics(s,t),n.ChromeStorageService.getBreakSessions(s,t)]),l={weekStart:Date.now()-6048e5,weekEnd:Date.now(),totalBreaks:r.length+15,averageEyeScore:e.score.weekly,fatigueEvents:a.filter(e=>e.fatigueIndex>70).length+5,improvements:["Increased break frequency by 20%","Reduced average fatigue index","Better posture consistency"],recommendations:["Try to maintain regular break intervals","Consider adjusting screen brightness","Practice the TCM massage techniques daily"],generated:Date.now()};d(e=>({...e,todayMetrics:a,todayBreaks:r,weeklyData:l,isLoading:!1}))}catch(e){console.error("Failed to load dashboard data:",e),d(e=>({...e,error:"Failed to load dashboard data",isLoading:!1}))}},c=(e,t)=>{s({[e]:t})};return i.isLoading?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):i.error?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,a.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-red-600 text-sm",children:i.error})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8 py-4 sm:py-6 lg:py-8",children:[(0,a.jsxs)("div",{className:"mb-6 sm:mb-8",children:[(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl lg:text-4xl font-bold text-gray-900",children:"EyeZen Dashboard"}),(0,a.jsx)("p",{className:"text-sm sm:text-base text-gray-600 mt-1",children:"Monitor your eye health and manage your settings"})]}),(0,a.jsx)("div",{className:"border-b border-gray-200 mb-4 sm:mb-6",children:(0,a.jsx)("nav",{className:"-mb-px flex space-x-4 sm:space-x-6 lg:space-x-8 overflow-x-auto scrollbar-hide",children:[{id:"overview",label:"Overview",icon:"ðŸ“Š"},{id:"eyeinfo",label:"Eye Info",icon:"ðŸ‘ï¸"},{id:"analytics",label:"Analytics",icon:"ðŸ“ˆ"},{id:"goals",label:"Goals",icon:"ðŸŽ¯"},{id:"settings",label:"Settings",icon:"âš™ï¸"},{id:"privacy",label:"Privacy",icon:"ðŸ”’"}].map(e=>(0,a.jsxs)("button",{onClick:()=>d(s=>({...s,activeTab:e.id})),className:"py-3 px-2 sm:px-3 border-b-2 font-medium text-xs sm:text-sm whitespace-nowrap flex-shrink-0 "+(i.activeTab===e.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,a.jsx)("span",{className:"mr-1 sm:mr-2 text-sm sm:text-base",children:e.icon}),(0,a.jsx)("span",{className:"hidden sm:inline",children:e.label}),(0,a.jsx)("span",{className:"sm:hidden",children:e.label.slice(0,3)})]},e.id))})}),"overview"===i.activeTab&&(()=>{const s=(()=>{const s=i.todayBreaks.filter(e=>e.completed).length,t=i.todayMetrics.length>0?i.todayMetrics.reduce((e,s)=>e+s.fatigueIndex,0)/i.todayMetrics.length:0,a=i.todayBreaks.reduce((e,s)=>e+s.duration,0);return{completedBreaks:s,avgFatigue:Math.round(t),totalBreakTime:Math.round(a/60),goalProgress:Math.round(s/e.settings.dailyBreakGoal*100)}})();return(0,a.jsxs)("div",{className:"space-y-4 sm:space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-3 sm:gap-4 lg:gap-6",children:[(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Eye Score"}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-blue-600",children:e.score.daily})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-blue-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+("improving"===e.score.trend?"bg-green-100 text-green-800":"declining"===e.score.trend?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.score.trend})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Breaks Today"}),(0,a.jsx)("p",{className:"text-xl sm:text-2xl font-bold text-green-600",children:s.completedBreaks})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-green-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(s.goalProgress,100)}%`}})}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[s.goalProgress,"% of daily goal"]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Avg Fatigue"}),(0,a.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-orange-600",children:[s.avgFatigue,"%"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-orange-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full "+(s.avgFatigue<30?"bg-green-100 text-green-800":s.avgFatigue<70?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:s.avgFatigue<30?"Low":s.avgFatigue<70?"Moderate":"High"})})]}),(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs sm:text-sm font-medium text-gray-600",children:"Break Time"}),(0,a.jsxs)("p",{className:"text-xl sm:text-2xl font-bold text-purple-600",children:[s.totalBreakTime,"m"]})]}),(0,a.jsx)("div",{className:"w-10 h-10 sm:w-12 sm:h-12 bg-purple-100 rounded-full flex items-center justify-center",children:(0,a.jsx)("svg",{className:"w-5 h-5 sm:w-6 sm:h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,a.jsx)("div",{className:"mt-2",children:(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Time invested in eye health"})})]})]}),i.weeklyData&&(0,a.jsxs)("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-base sm:text-lg font-semibold text-gray-800 mb-3 sm:mb-4",children:"Weekly Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4 sm:gap-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Improvements"}),(0,a.jsx)("ul",{className:"space-y-2",children:i.weeklyData.improvements.map((e,s)=>(0,a.jsxs)("li",{className:"text-xs sm:text-sm text-green-700 flex items-start",children:[(0,a.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e]},s))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-medium text-gray-700 mb-2 text-sm sm:text-base",children:"Recommendations"}),(0,a.jsx)("ul",{className:"space-y-2",children:i.weeklyData.recommendations.map((e,s)=>(0,a.jsxs)("li",{className:"text-xs sm:text-sm text-blue-700 flex items-start",children:[(0,a.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 mr-2 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e]},s))})]})]})]})]})})(),"eyeinfo"===i.activeTab&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Real-time Eye Metrics"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Fatigue Score"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[25.5,"%"]})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Blink Rate"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[18.2,"/min"]})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-purple-800",children:"Posture"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"GOOD"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Connection Status"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Demo Mode - Static Data"}),[{type:"info",message:"ðŸ‘ï¸ Eye Info dashboard is now integrated into the main dashboard!"}].map((e,s)=>(0,a.jsx)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,a.jsx)("p",{className:"text-sm text-blue-800",children:e.message})},s))]})]}),"settings"===i.activeTab&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Detection Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Camera Detection"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Enable real-time eye tracking"})]}),(0,a.jsx)("button",{onClick:()=>c("cameraEnabled",!e.settings.cameraEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.cameraEnabled?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.cameraEnabled?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Detection Sensitivity"}),(0,a.jsxs)("select",{value:e.settings.detectionSensitivity,onChange:e=>c("detectionSensitivity",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"low",children:"Low"}),(0,a.jsx)("option",{value:"medium",children:"Medium"}),(0,a.jsx)("option",{value:"high",children:"High"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Fatigue Threshold: ",e.settings.fatigueThreshold,"%"]}),(0,a.jsx)("input",{type:"range",min:"30",max:"90",value:e.settings.fatigueThreshold,onChange:e=>c("fatigueThreshold",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Reminder Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Break Reminders"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Get notified when it's time for a break"})]}),(0,a.jsx)("button",{onClick:()=>c("reminderEnabled",!e.settings.reminderEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.reminderEnabled?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.reminderEnabled?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Reminder Interval: ",e.settings.reminderInterval," minutes"]}),(0,a.jsx)("input",{type:"range",min:"10",max:"60",value:e.settings.reminderInterval,onChange:e=>c("reminderInterval",parseInt(e.target.value)),className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Break Duration: ",e.settings.breakDuration," seconds"]}),(0,a.jsx)("input",{type:"range",min:"20",max:"300",step:"10",value:e.settings.breakDuration,onChange:e=>c("breakDuration",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Goals"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Daily Break Goal: ",e.settings.dailyBreakGoal," breaks"]}),(0,a.jsx)("input",{type:"range",min:"3",max:"20",value:e.settings.dailyBreakGoal,onChange:e=>c("dailyBreakGoal",parseInt(e.target.value)),className:"mt-1 block w-full"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Eye Score Goal: ",e.settings.eyeScoreGoal]}),(0,a.jsx)("input",{type:"range",min:"60",max:"100",value:e.settings.eyeScoreGoal,onChange:e=>c("eyeScoreGoal",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]})]}),"privacy"===i.activeTab&&(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Privacy Settings"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Metrics Only Mode"}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Store only aggregated metrics, no raw data"})]}),(0,a.jsx)("button",{onClick:()=>c("metricsOnly",!e.settings.metricsOnly),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.metricsOnly?"bg-blue-600":"bg-gray-200"),children:(0,a.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.metricsOnly?"translate-x-6":"translate-x-1")})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Data Retention: ",e.settings.dataRetention," days"]}),(0,a.jsx)("input",{type:"range",min:"7",max:"365",value:e.settings.dataRetention,onChange:e=>c("dataRetention",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Data Management"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("button",{onClick:t,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Export My Data"}),(0,a.jsx)("button",{onClick:l,className:"w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors",children:"Erase All Data"})]})]})]}),"analytics"===i.activeTab&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Analytics view coming soon..."})}),"goals"===i.activeTab&&(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-gray-500",children:"Goals management coming soon..."})})]})})},d=()=>{const[e,s]=r.useState({userData:null,isLoading:!0,error:null});r.useEffect(()=>{t()},[]);const t=async()=>{try{const e=await n.ChromeStorageService.getUserData();if(e)s(s=>({...s,userData:e,isLoading:!1}));else{await n.ChromeStorageService.initialize();const e=await n.ChromeStorageService.getUserData();s(s=>({...s,userData:e,isLoading:!1}))}}catch(e){console.error("Failed to load user data:",e),s(e=>({...e,error:"Failed to load user data",isLoading:!1}))}};return e.isLoading?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.error?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,a.jsx)("p",{className:"text-red-600 text-sm",children:e.error})]})]}),(0,a.jsx)("button",{onClick:t,className:"mt-4 w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Retry"})]})}):e.userData?(0,a.jsx)(i,{userData:e.userData,onUpdateSettings:async t=>{if(e.userData)try{const a={...e.userData,settings:{...e.userData.settings,...t},lastUpdated:Date.now()};await n.ChromeStorageService.saveUserData(a),s(e=>({...e,userData:a})),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"SETTINGS_UPDATED",data:{settings:a.settings},timestamp:Date.now()})}catch(e){console.error("Failed to update settings:",e),s(e=>({...e,error:"Failed to update settings"}))}},onExportData:async()=>{try{const e=await n.ChromeStorageService.exportData(),s=new Blob([e],{type:"application/json"}),t=URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`eyezen-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(t),alert("Data exported successfully!")}catch(e){console.error("Failed to export data:",e),alert("Failed to export data. Please try again.")}},onEraseData:async()=>{if(confirm("Are you sure you want to erase all your data? This action cannot be undone."))try{await n.ChromeStorageService.clearAllData(),await n.ChromeStorageService.initialize();const e=await n.ChromeStorageService.getUserData();s(s=>({...s,userData:e})),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"DATA_ERASED",timestamp:Date.now()}),alert("All data has been erased successfully.")}catch(e){console.error("Failed to erase data:",e),alert("Failed to erase data. Please try again.")}}}):(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-gray-600",children:"No user data found"}),(0,a.jsx)("button",{onClick:t,className:"mt-4 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"Initialize Data"})]})})},o=document.getElementById("options-root");o?(0,l.createRoot)(o).render((0,a.jsx)(d,{})):console.error("Options root element not found")}},t={};function a(e){var r=t[e];if(void 0!==r)return r.exports;var l=t[e]={exports:{}};return s[e](l,l.exports,a),l.exports}a.m=s,e=[],a.O=(s,t,r,l)=>{if(!t){var n=1/0;for(c=0;c<e.length;c++){for(var[t,r,l]=e[c],i=!0,d=0;d<t.length;d++)(!1&l||n>=l)&&Object.keys(a.O).every(e=>a.O[e](t[d]))?t.splice(d--,1):(i=!1,l<n&&(n=l));if(i){e.splice(c--,1);var o=r();void 0!==o&&(s=o)}}return s}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[t,r,l]},a.d=(e,s)=>{for(var t in s)a.o(s,t)&&!a.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},a.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={575:0,820:0};a.O.j=s=>0===e[s];var s=(s,t)=>{var r,l,[n,i,d]=t,o=0;if(n.some(s=>0!==e[s])){for(r in i)a.o(i,r)&&(a.m[r]=i[r]);if(d)var c=d(a)}for(s&&s(t);o<n.length;o++)l=n[o],a.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return a.O(c)},t=self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[];t.forEach(s.bind(null,0)),t.push=s.bind(null,t.push.bind(t))})();var r=a.O(void 0,[96,123,820],()=>a(501));r=a.O(r)})();