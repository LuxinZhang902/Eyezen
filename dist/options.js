/*! For license information please see options.js.LICENSE.txt */
(()=>{"use strict";var e,t,r,s={428:(e,t,r)=>{var s=r(848),a=r(540),n=r(338),o=r(235),l=r(123);async function i(e,t=3){const r=await async function(){try{if("undefined"==typeof chrome||!chrome.runtime)return!1;const e=await new Promise((e,t)=>{const r=setTimeout(()=>t(new Error("Timeout")),2e3);chrome.runtime.sendMessage({type:"HEALTH_CHECK"},s=>{clearTimeout(r),chrome.runtime.lastError?t(new Error(chrome.runtime.lastError.message||"Runtime error")):e(s)})});return e&&e.success}catch(e){return console.log("üîç Service worker availability check failed:",e),!1}}();r||(console.warn("‚ö†Ô∏è Service worker not available, attempting restart..."),await d(),await new Promise(e=>setTimeout(e,1e3)));for(let r=1;r<=t;r++)try{console.log(`üöÄ Attempting to send ${e.type} message (attempt ${r}/${t})`);const s={...e,timestamp:Date.now(),attempt:r},a=await new Promise((e,t)=>{const a=setTimeout(()=>{t(new Error("Message timeout - service worker may have terminated"))},8e3);chrome.runtime.sendMessage(s,s=>{if(clearTimeout(a),chrome.runtime.lastError){const e=chrome.runtime.lastError.message||"Unknown runtime error";console.warn(`üí• Chrome runtime error (attempt ${r}): ${e}`),e.includes("Receiving end does not exist")?t(new Error("Service worker not available - extension may need reload")):e.includes("message port closed")?t(new Error("Service worker terminated during message processing")):e.includes("Extension context invalidated")?t(new Error("Extension context invalidated - reload required")):t(new Error(e))}else s?e(s):t(new Error("No response from service worker"))})});return console.log(`‚úÖ Message sent successfully (attempt ${r}):`,a),a}catch(s){const a=s instanceof Error?s.message:String(s);if(console.warn(`‚ö†Ô∏è Failed to send ${e.type} message (attempt ${r}): ${a}`),r<t){const e=Math.min(2e3*r,5e3);console.log(`üîÑ Retrying in ${e}ms after attempting service worker restart...`),(a.includes("not available")||a.includes("does not exist"))&&await d(),await new Promise(t=>setTimeout(t,e))}}const s=`Failed to send ${e.type} message after ${t} attempts`;if(console.error(`‚ùå ${s}`),"SETTINGS_UPDATED"===e.type){console.log("üîÑ Attempting fallback settings storage...");try{return await chrome.storage.local.set({user_settings:e.data?.settings,settings_updated_at:Date.now(),fallback_update:!0}),console.log("‚úÖ Settings stored via fallback method"),{success:!0,data:{fallback:!0}}}catch(e){console.error("‚ùå Fallback storage failed:",e)}}return{success:!1,error:"Service worker communication failed after multiple attempts"}}async function d(){try{if(console.log("üîÑ Attempting to restart service worker..."),chrome.management){const e=await chrome.management.getSelf();if(e.id)return console.log("üîÑ Reloading extension to restart service worker..."),await chrome.management.setEnabled(e.id,!1),await new Promise(e=>setTimeout(e,500)),void await chrome.management.setEnabled(e.id,!0)}console.log("üîÑ Attempting to wake service worker with multiple signals...");const e=[];for(let t=0;t<3;t++)e.push(new Promise(e=>{chrome.runtime.sendMessage({type:"WAKE_UP",signal:t},()=>{e()})}));await Promise.all(e),console.log("üîÑ Wake-up signals sent")}catch(e){console.warn("‚ö†Ô∏è Service worker restart attempt failed:",e)}}const c=({isVisible:e,onClose:t,onLogin:r,onSignup:n})=>{const[o,l]=(0,a.useState)(!0),[i,d]=(0,a.useState)(""),[c,m]=(0,a.useState)(""),[h,u]=(0,a.useState)(""),[x,g]=(0,a.useState)(!1),[b,p]=(0,a.useState)(""),[f,v]=(0,a.useState)(!1),[j,y]=(0,a.useState)(""),[w,N]=(0,a.useState)(!1),[k,L]=(0,a.useState)(""),[C,D]=(0,a.useState)(!1),[S,E]=(0,a.useState)(""),[M,T]=(0,a.useState)(""),[z,I]=(0,a.useState)(""),[A,B]=(0,a.useState)(!1);if(!e)return null;const P=()=>{d(""),m(""),u(""),p(""),v(!1),y(""),N(!1),L(""),D(!1),E(""),T(""),I(""),B(!1)};return(0,s.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e=>{e.target===e.currentTarget&&t()},children:(0,s.jsxs)("div",{className:"bg-white rounded-lg p-6 w-80 max-w-sm mx-4",onClick:e=>e.stopPropagation(),children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:C?"Reset Password":o?"Login":"Sign Up"}),(0,s.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 text-xl",children:"√ó"})]}),f&&!w?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)("svg",{className:"w-16 h-16 text-green-500 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Email Sent!"}),(0,s.jsxs)("p",{className:"text-gray-600 mb-4",children:["We've sent a verification code to ",(0,s.jsx)("strong",{children:i}),". Please check your inbox for the 6-digit code."]}),(0,s.jsx)("p",{className:"text-sm text-gray-500",children:"Don't see the email? Check your spam folder."}),(0,s.jsx)("button",{onClick:()=>N(!0),className:"mt-4 bg-green-500 text-white px-4 py-2 rounded-md hover:bg-green-600 transition-colors",children:"Enter Verification Code"})]}):w?(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0),p("");try{j===k?(await new Promise(e=>setTimeout(e,1e3)),n(i,c,h),t(),P()):p("Invalid verification code. Please try again.")}catch(e){p(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}},className:"space-y-4",children:[(0,s.jsxs)("div",{className:"text-center mb-4",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Enter Verification Code"}),(0,s.jsxs)("p",{className:"text-gray-600 text-sm",children:["We sent a 6-digit code to ",(0,s.jsx)("strong",{children:i})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Verification Code"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>y(e.target.value.replace(/\D/g,"").slice(0,6)),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-lg tracking-widest",required:!0,placeholder:"000000",maxLength:6,disabled:x})]}),b&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:b}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{N(!1),v(!1),y(""),p("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:x||6!==j.length,className:"flex-1 bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Verifying..."]}):"Verify & Sign Up"})]})]}):C&&!A?(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0),p("");try{if(!((await chrome.storage.local.get(["eyezen_users"])).eyezen_users||{})[i])throw new Error("No account found with this email address.");await new Promise(e=>setTimeout(e,1500));const e=Math.floor(1e5+9e5*Math.random()).toString();E(e),B(!0),console.log(`Password reset code sent to ${i}: ${e}`)}catch(e){p(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,s.jsx)("input",{type:"email",value:i,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter your email address",disabled:x})]}),b&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:b}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{D(!1),p("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:x||!i,className:"flex-1 bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Code..."]}):"Send Reset Code"})]})]}):A?(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0),p("");try{if(j!==S)throw new Error("Invalid reset code. Please try again.");if(M.length<6)throw new Error("Password must be at least 6 characters long.");if(M!==z)throw new Error("Passwords do not match.");const e=(await chrome.storage.local.get(["eyezen_users"])).eyezen_users||{};e[i]&&(e[i].password=M,await chrome.storage.local.set({eyezen_users:e}),P(),D(!1),alert("Password reset successfully! You can now login with your new password."))}catch(e){p(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}},className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reset Code"}),(0,s.jsx)("input",{type:"text",value:j,onChange:e=>{const t=e.target.value.replace(/\D/g,"").slice(0,6);y(t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-center text-lg tracking-widest",placeholder:"000000",maxLength:6,required:!0,disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,s.jsx)("input",{type:"password",value:M,onChange:e=>T(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter new password",minLength:6,disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,s.jsx)("input",{type:"password",value:z,onChange:e=>I(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Confirm new password",minLength:6,disabled:x})]}),b&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:b}),(0,s.jsxs)("div",{className:"flex space-x-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>{B(!1),D(!0),p("")},className:"flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-md hover:bg-gray-400 transition-colors",children:"Back"}),(0,s.jsx)("button",{type:"submit",disabled:x||6!==j.length||!M||!z,className:"flex-1 bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting..."]}):"Reset Password"})]})]}):(0,s.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),g(!0),p("");try{if(o)await r(i,c),t();else{await new Promise(e=>setTimeout(e,1500));const e=Math.floor(1e5+9e5*Math.random()).toString();L(e),v(!0),N(!0),console.log(`Verification code sent to ${i}: ${e}`)}}catch(e){p(e instanceof Error?e.message:"An error occurred")}finally{g(!1)}},className:"space-y-4",children:[!o&&(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name"}),(0,s.jsx)("input",{type:"text",value:h,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!o,placeholder:"Enter your name",disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,s.jsx)("input",{type:"email",value:i,onChange:e=>d(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter your email",disabled:x})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,s.jsx)("input",{type:"password",value:c,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent",required:!0,placeholder:"Enter your password",minLength:6,disabled:x})]}),b&&(0,s.jsx)("div",{className:"text-red-600 text-sm bg-red-50 p-2 rounded",children:b}),(0,s.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r from-green-400 to-emerald-400 text-white py-2 px-4 rounded-md hover:from-green-500 hover:to-emerald-500 transition-all duration-200 font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o?"Logging in...":"Creating Account..."]}):o?"Login":"Sign Up"}),o&&(0,s.jsx)("div",{className:"mt-3 text-center",children:(0,s.jsx)("button",{type:"button",onClick:()=>D(!0),className:"text-green-600 hover:text-green-700 text-sm font-medium",children:"Forgot Password?"})})]}),!w&&!C&&(0,s.jsx)("div",{className:"mt-4 text-center",children:(0,s.jsx)("button",{onClick:()=>{l(!o),P()},className:"text-green-600 hover:text-green-700 text-sm font-medium",children:o?"Don't have an account? Sign up":"Already have an account? Login"})})]})})},m=({userData:e,onUpdateSettings:t,onExportData:r,onEraseData:n})=>{const d=a.useRef(!0),[m,h]=(0,a.useState)({activeTab:"overview",isLoading:!0,error:null,weeklyData:null,todayMetrics:[],todayBreaks:[],imageAnalysisResult:null,cameraAnalysisResult:null,analysisMode:"camera-capture",aiLoading:!1,cameraEnabled:!1,isLoggedIn:!1,userEmail:"",showLoginModal:!1,loginLoading:!1,loginError:null,userDashboardData:null,tempReminderInterval:null,isSaving:!1,isDarkMode:!1,goals:o.DEFAULT_GOALS,goalsLoading:!0,goalPrompts:{daily:"",weekly:"",monthly:""},chartRange:"week",trendData:[]}),u=a.useCallback(e=>{d.current&&h(e)},[]);(0,a.useEffect)(()=>{x()},[]),(0,a.useEffect)(()=>{try{chrome.storage?.local.get(["uiTheme"],e=>{const t=e?.uiTheme||"light";try{document.body.classList.remove("theme-eyezen","theme-eyezen-light"),document.body.classList.add("dark"===t?"theme-eyezen":"theme-eyezen-light")}catch(e){}h(e=>({...e,isDarkMode:"dark"===t}))})}catch(e){}},[]);const x=async()=>{try{h(e=>({...e,isLoading:!0,error:null}));const t={weekStart:Date.now()-6048e5,weekEnd:Date.now(),totalBreaks:42,averageEyeScore:78,fatigueEvents:5,improvements:["Better posture","More frequent breaks"],recommendations:["Take more micro-breaks","Adjust screen brightness"],generated:Date.now()},r=e.metrics.filter(e=>{const t=new Date;t.setHours(0,0,0,0);const r=new Date(e.timestamp);return r.setHours(0,0,0,0),r.getTime()===t.getTime()}),s=e.breaks.filter(e=>{const t=new Date;t.setHours(0,0,0,0);const r=new Date(e.startTime);return r.setHours(0,0,0,0),r.getTime()===t.getTime()});h(e=>({...e,weeklyData:t,todayMetrics:r,todayBreaks:s,isLoading:!1}))}catch(e){console.error("Failed to load dashboard data:",e),h(e=>({...e,error:"Failed to load dashboard data",isLoading:!1}))}},g=(e,r)=>{t({[e]:r}),"reminderInterval"===e&&console.log("Check if here in receiving reminderInterval")},b=async()=>{if(null!==m.tempReminderInterval){h(e=>({...e,isSaving:!0}));try{t({reminderInterval:m.tempReminderInterval});const e=await async function(e,t,r="normal"){return i({type:"TEST_NOTIFICATION",data:{title:e,message:t,priority:r}})}("‚è∞ Reminder Interval Updated!",`Break reminders are now set to every ${m.tempReminderInterval} minute${1!==m.tempReminderInterval?"s":""}`,"high");e.success||console.warn("Failed to send test notification:",e.error),h(e=>({...e,tempReminderInterval:null,isSaving:!1}))}catch(e){console.error("Failed to save reminder interval:",e),h(e=>({...e,isSaving:!1}))}}},p=async()=>{try{if(console.log("Checking login status..."),"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local){const e=await chrome.storage.local.get(["eyezen_login_state"]);console.log("Login data from storage:",e),e.eyezen_login_state&&e.eyezen_login_state.isLoggedIn?(console.log("User is logged in:",e.eyezen_login_state.userEmail),h(t=>({...t,isLoggedIn:!0,userEmail:e.eyezen_login_state.userEmail,isLoading:!1})),await f(e.eyezen_login_state.userEmail)):(console.log("No login data found"),h(e=>({...e,isLoggedIn:!1,isLoading:!1})))}else console.warn("Chrome storage API not available, using fallback"),h(e=>({...e,isLoggedIn:!1,isLoading:!1}))}catch(e){console.error("Failed to check login status:",e),h(e=>({...e,isLoggedIn:!1,isLoading:!1}))}},f=async e=>{try{console.log(`Loading dashboard data for user: ${e}`);const t={goals:{daily:{breaks:8,eyeScore:85,completed:6},weekly:{consistency:5,avgScore:82},monthly:{improvement:12,streak:18}},analytics:{weeklyTrend:[78,82,85,88,84,87,89],monthlyAverage:84,improvementRate:15},settings:{notifications:!0,reminderInterval:20,darkMode:!1}};h(e=>({...e,userDashboardData:t}))}catch(e){console.error("Failed to load user dashboard data:",e),h(e=>({...e,userDashboardData:null}))}};(0,a.useEffect)(()=>{(async()=>{try{const e=await l.ChromeStorageService.getGoals(),t=N(e);u(r=>({...r,goals:e,goalsLoading:!1,goalPrompts:t}))}catch(e){u(e=>({...e,goalsLoading:!1}))}})(),k("week")},[]);const v=(e,t,r)=>{u(s=>({...s,goals:{...s.goals,[e]:{...s.goals[e],[t]:r}}}))},j=async e=>{try{const t=e?{[e]:m.goals[e]}:m.goals;await l.ChromeStorageService.updateGoals(t);const r=N(m.goals);u(e=>({...e,goalPrompts:r})),alert("Goals saved successfully")}catch(e){console.error("Failed to save goals:",e),alert("Failed to save goals")}},y=e=>e.length?e.reduce((e,t)=>e+t,0)/e.length:0,w=t=>{const r=new Date,s=new Date;s.setDate(r.getDate()-(t-1));const a=[];for(let r=0;r<t;r++){const t=new Date(s);t.setDate(s.getDate()+r);const n=t.toLocaleDateString(void 0,{month:"short",day:"numeric"}),o=e.metrics.filter(e=>new Date(e.timestamp).toDateString()===t.toDateString());a.push({label:n,value:y(o.map(e=>e.fatigueIndex))})}return a},N=t=>{const r=y(e.metrics.filter(e=>new Date(e.timestamp).toDateString()===(new Date).toDateString()).map(e=>e.fatigueIndex)),s=w(7),a=s.length?s.reduce((e,t)=>e+t.value,0)/s.length:0;return{daily:`Based on today‚Äôs fatigue (~${Math.round(r||0)}), aim for ${t.daily.breaksTarget} breaks and eye score ${t.daily.eyeScoreTarget}.`,weekly:`Your 7-day average fatigue is ~${Math.round(a||0)}. Target consistency ${t.weekly.consistencyTarget}% and avg score ${t.weekly.avgScoreTarget}.`,monthly:`Set improvement target ${t.monthly.improvementTarget}% and streak ${t.monthly.streakTarget} days to build habit.`}},k=t=>{let r=[];if("day"===t){new Date;const t=new Date(Date.now()-864e5);for(let s=0;s<24;s++){const a=new Date(t.getTime()+60*s*60*1e3),n=new Date(a.getTime()+36e5),o=`${a.getHours()}:00`,l=e.metrics.filter(e=>{const t=e.timestamp;return t>=a.getTime()&&t<n.getTime()});r.push({label:o,value:y(l.map(e=>e.fatigueIndex))})}}else r=w("week"===t?7:30);u(e=>({...e,chartRange:t,trendData:r}))},L=({data:e})=>{const t=e.map(e=>e.value).filter(e=>"number"==typeof e&&!isNaN(e)),r=Math.max(100,...t.length?t:[0]),a=(t,s)=>`${24+552*s/Math.max(1,e.length-1)},${156-(t-0)/Math.max(1,r-0)*132}`,n=e.map((e,t)=>a(e.value||0,t)).join(" ");return(0,s.jsxs)("div",{className:"w-full",children:[(0,s.jsxs)("svg",{width:600,height:180,className:"w-full h-44",children:[(0,s.jsx)("polyline",{points:n,fill:"none",stroke:"#10b981",strokeWidth:"2"}),e.map((e,t)=>{const[r,n]=a(e.value||0,t).split(",").map(Number);return(0,s.jsx)("circle",{cx:r,cy:n,r:"3",fill:"#10b981"},t)})]}),(0,s.jsx)("div",{className:"grid grid-cols-6 gap-2 mt-2 text-xs text-gray-600",children:e.slice(0,6).map((e,t)=>(0,s.jsx)("span",{children:e.label},t))})]})};(0,a.useEffect)(()=>{console.log("Dashboard mounted, checking login status..."),p(),chrome?.storage?.sync?.get?.("reminderInterval").then(e=>{const r=e?.reminderInterval;"number"==typeof r&&t({reminderInterval:r})}).catch(()=>{});const e=(e,t)=>{"local"===t&&e.eyezen_login_state&&(console.log("Dashboard: Login state changed in storage:",e.eyezen_login_state),p())};return"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.onChanged&&chrome.storage.onChanged.addListener(e),()=>{"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.onChanged&&chrome.storage.onChanged.removeListener(e)}},[]);const C=m.isLoading;return m.isLoading?(0,s.jsx)("div",{className:`min-h-screen ${m.isDarkMode?"bg-[#0b1220] text-[#e6edf7]":"bg-white text-gray-900"} flex items-center justify-center`,children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:m.isDarkMode?"text-gray-400":"text-gray-600",children:"Loading dashboard..."})]})}):(0,s.jsxs)("div",{className:`min-h-screen ${m.isDarkMode?"bg-[#0b1220] text-[#e6edf7]":"bg-white text-gray-900"} relative overflow-hidden`,children:[(0,s.jsxs)("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[(0,s.jsx)("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-emerald-300/20 rounded-full blur-3xl animate-pulse"}),(0,s.jsx)("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-amber-200/20 rounded-full blur-3xl animate-pulse delay-1000"}),(0,s.jsx)("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-teal-300/15 rounded-full blur-3xl animate-pulse delay-500"})]}),(0,s.jsx)("div",{className:"relative z-10 "+(m.isDarkMode?"eyezen-header backdrop-blur-xl border-b border-white/10 shadow-2xl":"bg-white/60 backdrop-blur-xl border-b border-gray-200 shadow-lg"),children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,s.jsx)("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-2xl transform hover:scale-105 transition-all duration-300",children:(0,s.jsxs)("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold gradient-text",children:"üëÅÔ∏è EyeZen Dashboard"}),(0,s.jsx)("p",{className:"text-blue-200/80 text-sm font-medium",children:"Advanced Digital Eye Health Analytics"})]})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsx)("button",{onClick:()=>{const e=m.isDarkMode?"light":"dark";h(e=>({...e,isDarkMode:!e.isDarkMode})),(e=>{try{document.body.classList.remove("theme-eyezen","theme-eyezen-light"),document.body.classList.add("dark"===e?"theme-eyezen":"theme-eyezen-light")}catch(e){}})(e);try{chrome.storage?.local.set({uiTheme:e})}catch(e){}},title:m.isDarkMode?"Switch to Morning Mode":"Switch to Night Mode",className:(m.isDarkMode?"bg-white/10 text-white hover:bg-white/20":"bg-gray-100 text-gray-800 hover:bg-gray-200")+" px-3 py-2 rounded-lg text-sm font-medium transition-all duration-200",children:m.isDarkMode?"üåô Night":"‚òÄÔ∏è Morning"}),m.isLoggedIn?(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-white/10 backdrop-blur-sm rounded-full px-4 py-2",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white text-xs font-bold",children:m.userEmail.charAt(0).toUpperCase()})}),(0,s.jsxs)("span",{className:"text-white/90 text-sm font-medium",children:["Welcome, ",m.userEmail.split("@")[0]]})]}),(0,s.jsx)("button",{onClick:async()=>{try{await chrome.storage.local.remove(["eyezen_login_state"]),h(e=>({...e,isLoggedIn:!1,userEmail:"",userDashboardData:null}))}catch(e){console.error("Logout failed:",e)}},className:"text-red-300 hover:text-red-100 text-sm font-medium px-3 py-1 rounded-lg hover:bg-red-500/20 transition-all duration-200",children:"Logout"})]}):(0,s.jsx)("button",{onClick:()=>h(e=>({...e,showLoginModal:!0})),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white px-6 py-2.5 rounded-xl text-sm font-semibold shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200",children:"Login"})]})]})})}),(0,s.jsx)("div",{className:"relative z-10 bg-gradient-to-r from-white/90 via-slate-50/90 to-white/90 backdrop-blur-xl border-b border-slate-200/50 shadow-lg",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsx)("nav",{className:"flex space-x-2 py-6",children:[{id:"overview",label:"Overview",icon:(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2v10z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 21l4-4 4 4"})]})},{id:"detection",label:"Detection",icon:(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})},{id:"analytics",label:"Analytics",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{id:"goals",label:"Goals",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})})},{id:"settings",label:"Settings",icon:(0,s.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{id:"privacy",label:"Privacy",icon:(0,s.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}].map(e=>(0,s.jsxs)("button",{onClick:()=>h(t=>({...t,activeTab:e.id})),className:"group flex items-center space-x-3 px-6 py-3 rounded-xl font-semibold transition-all duration-300 transform hover:scale-105 "+(m.activeTab===e.id?"bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-xl shadow-indigo-500/25":"text-slate-600 hover:text-indigo-600 hover:bg-white/80 hover:shadow-lg"),children:[(0,s.jsx)("span",{className:"transition-colors duration-300 "+(m.activeTab===e.id?"text-white":"text-slate-500 group-hover:text-indigo-500"),children:e.icon}),(0,s.jsx)("span",{className:"text-sm",children:e.label})]},e.id))})})}),(0,s.jsx)("div",{className:"relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:(0,s.jsx)("div",{className:"bg-white/40 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/30 p-8 min-h-[600px]",children:(()=>{switch(m.activeTab){case"overview":default:return(()=>{const{todayBreaks:t,todayMetrics:r}=(()=>{const e=(new Date).toDateString();return{todayBreaks:m.todayBreaks.filter(t=>new Date(t.startTime).toDateString()===e),todayMetrics:m.todayMetrics.filter(t=>new Date(t.timestamp).toDateString()===e)}})(),a=(t=>{if(!t.length)return 0;const r=new Date;let s=0;for(let a=0;a<30;a++){const n=new Date(r);if(n.setDate(r.getDate()-a),!(t.filter(e=>new Date(e.startTime).toDateString()===n.toDateString()).length>=(e.settings?.dailyBreakGoal||8)))break;s++}return s})(m.todayBreaks),n=(t=>{const r=(new Date).toDateString(),s=t.filter(e=>new Date(e.startTime).toDateString()===r),a=e.settings?.dailyBreakGoal||8;return Math.min(s.length/a*100,100)})(m.todayBreaks);return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-6 rounded-2xl shadow-lg border border-blue-200/50 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-blue-600 text-sm font-medium",children:"Today's Breaks"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-blue-800",children:t.length}),(0,s.jsxs)("p",{className:"text-blue-500 text-xs mt-1",children:["Target: ",e.settings?.dailyBreakGoal||8]})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"w-full bg-blue-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${n}%`}})})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-6 rounded-2xl shadow-lg border border-green-200/50 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-green-600 text-sm font-medium",children:"Current Streak"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-green-800",children:a}),(0,s.jsx)("p",{className:"text-green-500 text-xs mt-1",children:"days"})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"flex items-center space-x-1",children:[...Array(7)].map((e,t)=>(0,s.jsx)("div",{className:"w-3 h-3 rounded-full "+(t<a?"bg-green-500":"bg-green-200")},t))})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-6 rounded-2xl shadow-lg border border-purple-200/50 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-purple-600 text-sm font-medium",children:"Eye Health Score"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-purple-800",children:e.score?.current||0}),(0,s.jsx)("p",{className:"text-purple-500 text-xs mt-1",children:"out of 100"})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-purple-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"w-full bg-purple-200 rounded-full h-2",children:(0,s.jsx)("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${e.score?.current||0}%`}})})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-6 rounded-2xl shadow-lg border border-orange-200/50 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-orange-600 text-sm font-medium",children:"Weekly Average"}),(0,s.jsx)("p",{className:"text-3xl font-bold text-orange-800",children:e.score?.weekly||0}),(0,s.jsx)("p",{className:"text-orange-500 text-xs mt-1",children:"this week"})]}),(0,s.jsx)("div",{className:"w-12 h-12 bg-orange-500 rounded-xl flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("div",{className:"text-sm text-orange-600",children:e.score?.weekly>e.score?.current?"‚ÜóÔ∏è Improving":"‚ÜòÔ∏è Declining"})})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/40 p-8 hover:shadow-3xl transition-all duration-500",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold bg-gradient-to-r from-slate-700 to-slate-900 bg-clip-text text-transparent mb-8 flex items-center",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-indigo-500 via-purple-600 to-pink-600 rounded-2xl flex items-center justify-center mr-4 shadow-lg",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),"Quick Actions"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("button",{className:"group p-8 bg-gradient-to-br from-blue-500/10 via-blue-600/10 to-indigo-600/10 rounded-2xl border-2 border-blue-200/50 hover:border-blue-400/70 hover:bg-gradient-to-br hover:from-blue-500/20 hover:via-blue-600/20 hover:to-indigo-600/20 transition-all duration-300 text-left hover:shadow-2xl hover:shadow-blue-500/20 transform hover:scale-105",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl flex items-center justify-center mr-4 group-hover:scale-110 transition-all duration-300 shadow-lg group-hover:shadow-blue-500/50",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})}),(0,s.jsx)("h4",{className:"font-bold text-blue-800 text-lg group-hover:text-blue-900 transition-colors",children:"Take Break Now"})]}),(0,s.jsx)("p",{className:"text-blue-600 font-medium group-hover:text-blue-700 transition-colors",children:"Start a guided eye rest session"})]}),(0,s.jsxs)("button",{onClick:()=>h(e=>({...e,activeTab:"analytics"})),className:"group p-8 bg-gradient-to-br from-emerald-500/10 via-green-600/10 to-teal-600/10 rounded-2xl border-2 border-emerald-200/50 hover:border-emerald-400/70 hover:bg-gradient-to-br hover:from-emerald-500/20 hover:via-green-600/20 hover:to-teal-600/20 transition-all duration-300 text-left hover:shadow-2xl hover:shadow-emerald-500/20 transform hover:scale-105",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-2xl flex items-center justify-center mr-4 group-hover:scale-110 transition-all duration-300 shadow-lg group-hover:shadow-emerald-500/50",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),(0,s.jsx)("h4",{className:"font-bold text-emerald-800 text-lg group-hover:text-emerald-900 transition-colors",children:"View Analytics"})]}),(0,s.jsx)("p",{className:"text-emerald-600 font-medium group-hover:text-emerald-700 transition-colors",children:"Check your detailed progress"})]}),(0,s.jsxs)("button",{onClick:()=>h(e=>({...e,activeTab:"settings"})),className:"group p-8 bg-gradient-to-br from-purple-500/10 via-violet-600/10 to-purple-600/10 rounded-2xl border-2 border-purple-200/50 hover:border-purple-400/70 hover:bg-gradient-to-br hover:from-purple-500/20 hover:via-violet-600/20 hover:to-purple-600/20 transition-all duration-300 text-left hover:shadow-2xl hover:shadow-purple-500/20 transform hover:scale-105",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-violet-600 rounded-2xl flex items-center justify-center mr-4 group-hover:scale-110 transition-all duration-300 shadow-lg group-hover:shadow-purple-500/50",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})})}),(0,s.jsx)("h4",{className:"font-bold text-purple-800 text-lg group-hover:text-purple-900 transition-colors",children:"Adjust Settings"})]}),(0,s.jsx)("p",{className:"text-purple-600 font-medium group-hover:text-purple-700 transition-colors",children:"Customize your preferences"})]})]})]})]})})();case"detection":return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50 p-8 rounded-2xl shadow-lg border border-green-200/50",children:(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsxs)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-green-800 mb-2",children:"üëÅÔ∏è Detection & Monitoring"}),(0,s.jsx)("p",{className:"text-green-600",children:"Configure eye tracking and fatigue detection settings"})]})]})}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center mr-3",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})})}),"‚öôÔ∏è General Settings"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200/50 hover:border-blue-300/50 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsxs)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.828 4.828A4 4 0 015.5 4H9v1H5.5a3 3 0 00-2.121.879l-.707.707A3 3 0 002 8.5V12H1V8.5a4 4 0 011.172-2.828z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-lg font-semibold text-blue-800",children:"üîî Notifications"}),(0,s.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Enable real-time eye tracking and fatigue detection"}),(0,s.jsx)("p",{className:"text-xs text-green-500 mt-2",children:"üîç Real-time monitoring ‚Ä¢ üéØ Accurate detection ‚Ä¢ üöÄ Instant alerts"})]})]}),(0,s.jsx)("button",{onClick:()=>g("cameraEnabled",!e.settings.cameraEnabled),className:"relative inline-flex h-8 w-14 items-center rounded-full transition-all duration-300 transform hover:scale-105 "+(e.settings.cameraEnabled?"bg-gradient-to-r from-green-500 to-emerald-600 shadow-lg shadow-green-200":"bg-gray-300 hover:bg-gray-400"),children:(0,s.jsx)("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform duration-300 shadow-md "+(e.settings.cameraEnabled?"translate-x-7":"translate-x-1")})})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200/50 hover:border-blue-300/50 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 100-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 100-4m0 4v2m0-6V4"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-lg font-semibold text-blue-800",children:"üéöÔ∏è Detection Sensitivity"}),(0,s.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Adjust how sensitive the eye tracking detection should be"}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsxs)("select",{value:e.settings.detectionSensitivity,onChange:e=>g("detectionSensitivity",e.target.value),className:"w-full px-4 py-3 bg-white border-2 border-blue-200 rounded-xl focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-blue-800 font-medium shadow-sm hover:shadow-md",children:[(0,s.jsx)("option",{value:"low",children:"üü¢ Low - Less sensitive, fewer alerts"}),(0,s.jsx)("option",{value:"medium",children:"üü° Medium - Balanced detection"}),(0,s.jsx)("option",{value:"high",children:"üî¥ High - Very sensitive, more alerts"})]})})]})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-xl border border-orange-200/50 hover:border-orange-300/50 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-lg font-semibold text-orange-800",children:"‚è∞ Break Reminders"}),(0,s.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"Configure when and how often you want break reminders"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Reminder Interval (minutes)"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("select",{value:m.tempReminderInterval??(e.settings.reminderInterval||20),onChange:e=>{return t=parseInt(e.target.value),void h(e=>({...e,‰∫Ü:t}));var t},className:"w-full px-3 py-2 bg-white border border-orange-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-100",children:[(0,s.jsx)("option",{value:1,children:"1 minute"}),(0,s.jsx)("option",{value:15,children:"15 minutes"}),(0,s.jsx)("option",{value:20,children:"20 minutes (recommended)"}),(0,s.jsx)("option",{value:30,children:"30 minutes"}),(0,s.jsx)("option",{value:45,children:"45 minutes"}),(0,s.jsx)("option",{value:60,children:"1 hour"})]}),null!==m.tempReminderInterval&&(0,s.jsx)("button",{onClick:b,disabled:m.isSaving,className:"w-full px-4 py-2 bg-gradient-to-r from-orange-500 to-red-500 text-white font-medium rounded-lg hover:from-orange-600 hover:to-red-600 focus:ring-2 focus:ring-orange-300 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:m.isSaving?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,s.jsx)("span",{children:"Saving..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),(0,s.jsx)("span",{children:"Save & Test Notification"})]})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Daily Break Target"}),(0,s.jsxs)("select",{value:e.settings.dailyBreakGoal||8,onChange:e=>g("dailyBreakGoal",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-white border border-orange-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-100",children:[(0,s.jsx)("option",{value:6,children:"6 breaks/day"}),(0,s.jsx)("option",{value:8,children:"8 breaks/day (recommended)"}),(0,s.jsx)("option",{value:10,children:"10 breaks/day"}),(0,s.jsx)("option",{value:12,children:"12 breaks/day"})]})]})]})]})]})})]})]})]});case"analytics":return C?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading your analytics..."})]}):m.isLoggedIn?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 p-8 rounded-2xl shadow-lg border border-emerald-200/50",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-emerald-800 mb-2",children:"üìä Analytics & Insights"}),(0,s.jsx)("p",{className:"text-emerald-600",children:"Track your eye health trends and download reports"})]}),(0,s.jsx)("div",{className:"flex justify-center space-x-4 mb-6",children:["day","week","month"].map(e=>(0,s.jsx)("button",{onClick:()=>k(e),className:"px-6 py-2 rounded-lg font-medium transition-all "+(m.chartRange===e?"bg-emerald-600 text-white shadow-lg":"bg-white text-emerald-600 border border-emerald-200 hover:bg-emerald-50"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/30 p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("h4",{className:"text-lg font-bold text-gray-800 flex items-center",children:[(0,s.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center mr-3",children:(0,s.jsx)("span",{className:"text-white text-sm",children:"üìà"})}),"Eye Fatigue Trend (",m.chartRange,")"]}),(0,s.jsxs)("button",{onClick:()=>(async e=>{try{const{startDate:t,endDate:r}=(e=>{const t=new Date,r=new Date;return"day"===e?r.setDate(t.getDate()-1):"week"===e?r.setDate(t.getDate()-7):r.setDate(t.getDate()-30),{startDate:r,endDate:t}})(e),s=["timestamp,blinkRate,fatigueIndex,posture,earValue,perclosValue",...(await l.ChromeStorageService.getMetrics(t,r)).map(e=>[new Date(e.timestamp).toISOString(),e.blinkRate,e.fatigueIndex,e.posture,e.earValue,e.perclosValue].join(","))].join("\n"),a=new Blob([s],{type:"text/csv"}),n=URL.createObjectURL(a),o=document.createElement("a");o.href=n,o.download=`eyezen-${e}-report-${(new Date).toISOString().slice(0,10)}.csv`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(n)}catch(e){console.error("Failed to download report:",e),alert("Failed to download report")}})(m.chartRange),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg shadow flex items-center space-x-2",children:[(0,s.jsx)("span",{children:"üì•"}),(0,s.jsx)("span",{children:"Download CSV"})]})]}),m.trendData.length>0?(0,s.jsx)(L,{data:m.trendData}):(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,s.jsx)("p",{children:"No data available for the selected range"})})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/30 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("span",{className:"text-white text-xl",children:"üìä"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-800",children:"Average Score"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Current period"})]})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:m.trendData.length>0?Math.round(m.trendData.reduce((e,t)=>e+(t.value||0),0)/m.trendData.length):0})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/30 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("span",{className:"text-white text-xl",children:"üìà"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-800",children:"Data Points"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Measurements"})]})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-emerald-600",children:m.trendData.length})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/30 p-6",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("span",{className:"text-white text-xl",children:"‚è±Ô∏è"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-800",children:"Range"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Time period"})]})]}),(0,s.jsx)("div",{className:"text-2xl font-bold text-purple-600 capitalize",children:m.chartRange})]})]})]}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-gradient-to-br from-purple-50 via-indigo-50 to-pink-50 rounded-2xl shadow-xl border border-purple-200/50 p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,s.jsx)("span",{className:"text-white text-2xl",children:"üîí"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-purple-800 mb-2",children:"Analytics Access Required"}),(0,s.jsx)("p",{className:"text-purple-600",children:"Unlock detailed insights into your eye health journey"})]}),(0,s.jsx)("button",{onClick:()=>h(e=>({...e,showLoginModal:!0})),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 mb-6",children:"Login to View Analytics"}),(0,s.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/40",children:[(0,s.jsx)("h4",{className:"font-semibold text-purple-800 mb-3 text-sm",children:"üéØ What you'll get:"}),(0,s.jsxs)("ul",{className:"text-sm text-purple-700 space-y-1",children:[(0,s.jsx)("li",{children:"‚Ä¢ Detailed eye strain patterns"}),(0,s.jsx)("li",{children:"‚Ä¢ Weekly progress reports"}),(0,s.jsx)("li",{children:"‚Ä¢ Personalized recommendations"}),(0,s.jsx)("li",{children:"‚Ä¢ Historical trend analysis"})]})]})]})});case"goals":return C?(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading your goals..."})]}):m.isLoggedIn?(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 p-8 rounded-2xl shadow-lg border border-indigo-200/50",children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-indigo-800 mb-2",children:"üéØ Your Eye Health Goals"}),(0,s.jsx)("p",{className:"text-indigo-600",children:"Set daily, weekly, and monthly targets"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/30 p-6 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("span",{className:"text-white text-xl",children:"üìÖ"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-800",children:"Daily Goals"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Today's targets"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Breaks target"}),(0,s.jsx)("input",{type:"number",min:0,className:"w-full border rounded-lg px-3 py-2",value:m.goals.daily.breaksTarget,onChange:e=>v("daily","breaksTarget",Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Eye score target"}),(0,s.jsx)("input",{type:"number",min:0,max:100,className:"w-full border rounded-lg px-3 py-2",value:m.goals.daily.eyeScoreTarget,onChange:e=>v("daily","eyeScoreTarget",Number(e.target.value))})]})]}),(0,s.jsx)("div",{className:"text-xs text-blue-700 bg-blue-50 px-3 py-2 rounded-lg",children:m.goalPrompts.daily}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>j("daily"),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg shadow",children:"Save Daily"})})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/30 p-6 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-green-500 to-emerald-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("span",{className:"text-white text-xl",children:"üìä"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-800",children:"Weekly Progress"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"This week's consistency"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Consistency target (%)"}),(0,s.jsx)("input",{type:"number",min:0,max:100,className:"w-full border rounded-lg px-3 py-2",value:m.goals.weekly.consistencyTarget,onChange:e=>v("weekly","consistencyTarget",Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Average score target"}),(0,s.jsx)("input",{type:"number",min:0,max:100,className:"w-full border rounded-lg px-3 py-2",value:m.goals.weekly.avgScoreTarget,onChange:e=>v("weekly","avgScoreTarget",Number(e.target.value))})]})]}),(0,s.jsx)("div",{className:"text-xs text-emerald-700 bg-emerald-50 px-3 py-2 rounded-lg",children:m.goalPrompts.weekly}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>j("weekly"),className:"bg-emerald-600 hover:bg-emerald-700 text-white px-4 py-2 rounded-lg shadow",children:"Save Weekly"})})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg border border-white/30 p-6 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("div",{className:"flex items-center mb-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("span",{className:"text-white text-xl",children:"üèÜ"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h4",{className:"font-bold text-gray-800",children:"Achievements"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Your milestones"})]})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Improvement target (%)"}),(0,s.jsx)("input",{type:"number",min:0,max:100,className:"w-full border rounded-lg px-3 py-2",value:m.goals.monthly.improvementTarget,onChange:e=>v("monthly","improvementTarget",Number(e.target.value))})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm text-gray-600 mb-1",children:"Streak target (days)"}),(0,s.jsx)("input",{type:"number",min:0,className:"w-full border rounded-lg px-3 py-2",value:m.goals.monthly.streakTarget,onChange:e=>v("monthly","streakTarget",Number(e.target.value))})]})]}),(0,s.jsx)("div",{className:"text-xs text-purple-700 bg-purple-50 px-3 py-2 rounded-lg",children:m.goalPrompts.monthly}),(0,s.jsx)("div",{className:"flex justify-end",children:(0,s.jsx)("button",{onClick:()=>j("monthly"),className:"bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg shadow",children:"Save Monthly"})})]})]})]})]}):(0,s.jsx)("div",{className:"text-center py-8",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-gradient-to-br from-emerald-50 via-teal-50 to-cyan-50 rounded-2xl shadow-xl border border-emerald-200/50 p-8",children:[(0,s.jsxs)("div",{className:"text-center mb-6",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gradient-to-br from-emerald-500 to-cyan-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg",children:(0,s.jsx)("span",{className:"text-white text-2xl",children:"üéØ"})}),(0,s.jsx)("h3",{className:"text-2xl font-bold text-emerald-800 mb-2",children:"Goals Access Required"}),(0,s.jsx)("p",{className:"text-emerald-600",children:"Set and track your personalized eye health objectives"})]}),(0,s.jsx)("button",{onClick:()=>h(e=>({...e,showLoginModal:!0})),className:"w-full bg-gradient-to-r from-emerald-500 to-cyan-500 hover:from-emerald-600 hover:to-cyan-600 text-white font-semibold py-3 px-6 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105 mb-6",children:"Login to Access Goals"}),(0,s.jsxs)("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-4 border border-white/40",children:[(0,s.jsx)("h4",{className:"font-semibold text-emerald-800 mb-3 text-sm",children:"üéØ What you'll get:"}),(0,s.jsxs)("ul",{className:"text-sm text-emerald-700 space-y-1",children:[(0,s.jsx)("li",{children:"‚Ä¢ Personalized eye health goals"}),(0,s.jsx)("li",{children:"‚Ä¢ Daily progress tracking"}),(0,s.jsx)("li",{children:"‚Ä¢ Achievement milestones"}),(0,s.jsx)("li",{children:"‚Ä¢ Custom break reminders"})]})]})]})});case"settings":return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-8 rounded-2xl shadow-lg border border-blue-200/50",children:(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-indigo-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-blue-800 mb-2",children:"‚öôÔ∏è General Settings"}),(0,s.jsx)("p",{className:"text-blue-600",children:"Customize your general preferences and notifications"})]})]})}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center mr-3",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.828 4.828A4 4 0 015.5 4H9v1H5.5a3 3 0 00-2.121.879l-.707.707A3 3 0 002 8.5V12H1V8.5a4 4 0 011.172-2.828z"})})}),"üîî Notification Settings"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200/50 hover:border-blue-300/50 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5 5v-5zM4.828 4.828A4 4 0 015.5 4H9v1H5.5a3 3 0 00-2.121.879l-.707.707A3 3 0 002 8.5V12H1V8.5a4 4 0 011.172-2.828z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-lg font-semibold text-blue-800",children:"üîî Notifications"}),(0,s.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Enable break reminders and health alerts"}),(0,s.jsx)("p",{className:"text-xs text-blue-500 mt-2",children:"üì± Smart alerts ‚Ä¢ ‚è∞ Timely reminders ‚Ä¢ üéØ Personalized"})]})]}),(0,s.jsx)("button",{onClick:()=>g("reminderEnabled",!e.settings.reminderEnabled),className:"relative inline-flex h-8 w-14 items-center rounded-full transition-all duration-300 transform hover:scale-105 "+(e.settings.reminderEnabled?"bg-gradient-to-r from-blue-500 to-indigo-600 shadow-lg shadow-blue-200":"bg-gray-300 hover:bg-gray-400"),children:(0,s.jsx)("span",{className:"inline-block h-6 w-6 transform rounded-full bg-white transition-transform duration-300 shadow-md "+(e.settings.reminderEnabled?"translate-x-7":"translate-x-1")})})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-orange-50 to-red-50 p-6 rounded-xl border border-orange-200/50 hover:border-orange-300/50 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-start space-x-4 mb-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-orange-400 to-red-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("label",{className:"text-lg font-semibold text-orange-800",children:"‚è∞ Break Reminders"}),(0,s.jsx)("p",{className:"text-sm text-orange-600 mt-1",children:"Configure when and how often you want break reminders"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Reminder Interval (minutes)"}),(0,s.jsxs)("select",{value:e.settings.reminderInterval||20,onChange:e=>g("reminderInterval",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-white border border-orange-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-100",children:[(0,s.jsx)("option",{value:1,children:"1 minute"}),(0,s.jsx)("option",{value:15,children:"15 minutes"}),(0,s.jsx)("option",{value:20,children:"20 minutes (recommended)"}),(0,s.jsx)("option",{value:30,children:"30 minutes"}),(0,s.jsx)("option",{value:45,children:"45 minutes"}),(0,s.jsx)("option",{value:60,children:"1 hour"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-orange-700 mb-2",children:"Daily Break Target"}),(0,s.jsxs)("select",{value:e.settings.dailyBreakGoal||8,onChange:e=>g("dailyBreakGoal",parseInt(e.target.value)),className:"w-full px-3 py-2 bg-white border border-orange-200 rounded-lg focus:border-orange-500 focus:ring-2 focus:ring-orange-100",children:[(0,s.jsx)("option",{value:6,children:"6 breaks/day"}),(0,s.jsx)("option",{value:8,children:"8 breaks/day (recommended)"}),(0,s.jsx)("option",{value:10,children:"10 breaks/day"}),(0,s.jsx)("option",{value:12,children:"12 breaks/day"})]})]})]})]})]})})]})]})]});case"privacy":return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsx)("div",{className:"bg-gradient-to-br from-purple-50 via-pink-50 to-red-50 p-8 rounded-2xl shadow-lg border border-purple-200/50",children:(0,s.jsxs)("div",{className:"flex items-center mb-6",children:[(0,s.jsx)("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-600 rounded-xl flex items-center justify-center mr-4",children:(0,s.jsx)("svg",{className:"w-7 h-7 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-2xl font-bold text-purple-800 mb-2",children:"üîí Privacy & Data"}),(0,s.jsx)("p",{className:"text-purple-600",children:"Manage your data privacy and security settings"})]})]})}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-white/20 hover:shadow-2xl transition-all duration-300",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-purple-400 to-pink-500 rounded-lg flex items-center justify-center mr-3",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4"})})}),"üìä Data Management"]}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200/50 hover:border-green-300/50 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-green-400 to-emerald-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-lg font-semibold text-green-800",children:"üì§ Export Your Data"}),(0,s.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Download all your eye health data and analytics"}),(0,s.jsx)("p",{className:"text-xs text-green-500 mt-2",children:"üíæ Complete backup ‚Ä¢ üìã JSON format ‚Ä¢ üîÑ Portable"})]})]}),(0,s.jsx)("button",{onClick:()=>{const t={metrics:m.todayMetrics||[],breaks:m.todayBreaks||[],settings:e.settings||{},weeklyData:m.weeklyData||null,exportDate:(new Date).toISOString()},r=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=`eye-health-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(s)},className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Export Data"})]})}),(0,s.jsx)("div",{className:"bg-gradient-to-r from-red-50 to-pink-50 p-6 rounded-xl border border-red-200/50 hover:border-red-300/50 transition-all duration-200",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-gradient-to-br from-red-400 to-pink-500 rounded-lg flex items-center justify-center flex-shrink-0",children:(0,s.jsx)("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-lg font-semibold text-red-800",children:"üóëÔ∏è Delete All Data"}),(0,s.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"Permanently remove all your stored data"}),(0,s.jsx)("p",{className:"text-xs text-red-500 mt-2",children:"‚ö†Ô∏è Irreversible action ‚Ä¢ üî• Complete removal ‚Ä¢ üíÄ No recovery"})]})]}),(0,s.jsx)("button",{onClick:()=>{confirm("Are you sure you want to delete all your data? This action cannot be undone.")&&chrome.storage.local.clear(()=>{h(e=>({...e,todayMetrics:[],todayBreaks:[],weeklyData:null,isLoggedIn:!1,userEmail:""})),alert("All data has been deleted successfully.")})},className:"bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700 text-white px-6 py-3 rounded-xl font-medium transition-all duration-200 transform hover:scale-105 shadow-lg hover:shadow-xl",children:"Delete Data"})]})})]})]}),(0,s.jsxs)("div",{className:"bg-white/90 backdrop-blur-sm p-8 rounded-2xl shadow-xl border border-white/20",children:[(0,s.jsxs)("h4",{className:"text-xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)("span",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-lg flex items-center justify-center mr-3",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),"‚ÑπÔ∏è Privacy Information"]}),(0,s.jsxs)("div",{className:"space-y-4 text-gray-600",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-blue-800 mb-2",children:"üîê Data Storage"}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:"All your data is stored locally on your device. We do not collect or transmit any personal information to external servers."})]}),(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border border-green-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-green-800 mb-2",children:"üìπ Camera Usage"}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:"Camera access is used only for real-time eye tracking analysis. No images or videos are stored or transmitted."})]}),(0,s.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-200",children:[(0,s.jsx)("h5",{className:"font-semibold text-purple-800 mb-2",children:"üõ°Ô∏è Your Control"}),(0,s.jsx)("p",{className:"text-sm text-purple-700",children:"You have complete control over your data. You can export or delete all information at any time using the options above."})]})]})]})]})}})()})}),(0,s.jsx)(c,{isVisible:m.showLoginModal,onClose:()=>h(e=>({...e,showLoginModal:!1,loginError:null})),onLogin:async(e,t)=>{h(e=>({...e,loginLoading:!0,loginError:null}));try{const r=(await chrome.storage.local.get(["eyezen_users"])).eyezen_users||{};if(!r[e])throw new Error("No account found with this email address. Please sign up first.");if(r[e].password!==t)throw new Error("Incorrect password. Please try again.");h(t=>({...t,isLoggedIn:!0,userEmail:e,showLoginModal:!1,loginLoading:!1})),await chrome.storage.local.set({eyezen_login_state:{isLoggedIn:!0,userEmail:e,loginTime:Date.now()}}),await f(e)}catch(e){h(t=>({...t,loginError:e instanceof Error?e.message:"Login failed. Please check your credentials.",loginLoading:!1}))}},onSignup:async(e,t,r)=>{h(e=>({...e,loginLoading:!0,loginError:null}));try{const s=(await chrome.storage.local.get(["eyezen_users"])).eyezen_users||{};if(s[e])throw new Error("An account with this email already exists. Please login instead.");if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e))throw new Error("Please enter a valid email address.");if(t.length<6)throw new Error("Password must be at least 6 characters long.");const a={email:e,password:t,name:r,createdAt:Date.now(),verified:!0};s[e]=a,await chrome.storage.local.set({eyezen_users:s}),h(t=>({...t,isLoggedIn:!0,userEmail:e,showLoginModal:!1,loginLoading:!1})),await chrome.storage.local.set({eyezen_login_state:{isLoggedIn:!0,userEmail:e,loginTime:Date.now()}}),await f(e)}catch(e){h(t=>({...t,loginError:e instanceof Error?e.message:"Signup failed. Please try again.",loginLoading:!1}))}}}),m.loginError&&(0,s.jsxs)("div",{className:"fixed top-4 right-4 bg-red-50 border border-red-200 rounded-lg p-4 max-w-md z-50",children:[(0,s.jsx)("h3",{className:"text-red-800 font-medium",children:"Login Error"}),(0,s.jsx)("p",{className:"text-red-600 text-sm",children:m.loginError}),(0,s.jsx)("button",{onClick:()=>h(e=>({...e,loginError:null})),className:"mt-2 text-red-600 hover:text-red-800 text-sm underline",children:"Dismiss"})]})]})},h=()=>{const[e,t]=a.useState({userData:null,isLoading:!0,error:null});a.useEffect(()=>{r()},[]);const r=async()=>{try{const e=await l.ChromeStorageService.getUserData();if(e)t(t=>({...t,userData:e,isLoading:!1}));else{await l.ChromeStorageService.initialize();const e=await l.ChromeStorageService.getUserData();t(t=>({...t,userData:e,isLoading:!1}))}}catch(e){console.error("Failed to load user data:",e),t(e=>({...e,error:"Failed to load user data",isLoading:!1}))}};return e.isLoading?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.error?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,s.jsx)("p",{className:"text-red-600 text-sm",children:e.error})]})]}),(0,s.jsx)("button",{onClick:r,className:"mt-4 w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Retry"})]})}):e.userData?(0,s.jsx)(m,{userData:e.userData,onUpdateSettings:async r=>{if(!e.userData)return{success:!1,error:"No user data"};try{const s={...e.userData,settings:{...e.userData.settings,...r},lastUpdated:Date.now()};if(console.log("üíæ Saving user data to storage..."),await l.ChromeStorageService.saveUserData(s),console.log("‚úÖ User data saved successfully"),t(e=>({...e,userData:s})),"undefined"!=typeof chrome&&chrome.runtime)try{console.log("üì§ Sending SETTINGS_UPDATED message to background script...");const e=await async function(e){return i({type:"SETTINGS_UPDATED",data:e})}(s.settings);return console.log("‚úÖ Settings update message sent successfully:",e),e||{success:!0}}catch(e){const t=e instanceof Error?e.message:String(e);return console.error("‚ùå Failed to send settings update message:",t),{success:!1,error:t}}return{success:!0}}catch(e){return console.error("Failed to update settings:",e),t(e=>({...e,error:"Failed to update settings"})),{success:!1,error:e instanceof Error?e.message:String(e)}}},onExportData:async()=>{try{const e=await l.ChromeStorageService.exportData(),t=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download=`eyezen-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r),alert("Data exported successfully!")}catch(e){console.error("Failed to export data:",e),alert("Failed to export data. Please try again.")}},onEraseData:async()=>{if(confirm("Are you sure you want to erase all your data? This action cannot be undone."))try{await l.ChromeStorageService.clearAllData(),await l.ChromeStorageService.initialize();const e=await l.ChromeStorageService.getUserData();if(t(t=>({...t,userData:e})),"undefined"!=typeof chrome&&chrome.runtime)try{await chrome.runtime.sendMessage({type:"DATA_ERASED",timestamp:Date.now()})}catch(e){console.error("‚ùå Failed to notify background script of data erasure:",e)}alert("All data has been erased successfully.")}catch(e){console.error("Failed to erase data:",e),alert("Failed to erase data. Please try again.")}}}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"No user data found"}),(0,s.jsx)("button",{onClick:r,className:"mt-4 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"Initialize Data"})]})})},u=document.getElementById("options-root");if(u){u.innerHTML="";try{(0,n.createRoot)(u).render((0,s.jsx)(h,{}))}catch(e){console.error("Failed to initialize React root:",e),u.innerHTML='\n      <div style="padding: 20px; text-align: center; color: red;">\n        <h2>Failed to load options page</h2>\n        <p>Please try refreshing the page or reloading the extension.</p>\n        <button onclick="window.location.reload()" style="padding: 10px 20px; margin-top: 10px;">\n          Reload Page\n        </button>\n      </div>\n    '}}else console.error("Options root element not found")},463:(e,t)=>{function r(e,t){var r=e.length;e.push(t);e:for(;0<r;){var s=r-1>>>1,a=e[s];if(!(0<n(a,t)))break e;e[s]=t,e[r]=a,r=s}}function s(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var s=0,a=e.length,o=a>>>1;s<o;){var l=2*(s+1)-1,i=e[l],d=l+1,c=e[d];if(0>n(i,r))d<a&&0>n(c,i)?(e[s]=c,e[d]=r,s=d):(e[s]=i,e[l]=r,s=l);else{if(!(d<a&&0>n(c,r)))break e;e[s]=c,e[d]=r,s=d}}}return t}function n(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,i=l.now();t.unstable_now=function(){return l.now()-i}}var d=[],c=[],m=1,h=null,u=3,x=!1,g=!1,b=!1,p="function"==typeof setTimeout?setTimeout:null,f="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function j(e){for(var t=s(c);null!==t;){if(null===t.callback)a(c);else{if(!(t.startTime<=e))break;a(c),t.sortIndex=t.expirationTime,r(d,t)}t=s(c)}}function y(e){if(b=!1,j(e),!g)if(null!==s(d))g=!0,I(w);else{var t=s(c);null!==t&&A(y,t.startTime-e)}}function w(e,r){g=!1,b&&(b=!1,f(C),C=-1),x=!0;var n=u;try{for(j(r),h=s(d);null!==h&&(!(h.expirationTime>r)||e&&!E());){var o=h.callback;if("function"==typeof o){h.callback=null,u=h.priorityLevel;var l=o(h.expirationTime<=r);r=t.unstable_now(),"function"==typeof l?h.callback=l:h===s(d)&&a(d),j(r)}else a(d);h=s(d)}if(null!==h)var i=!0;else{var m=s(c);null!==m&&A(y,m.startTime-r),i=!1}return i}finally{h=null,u=n,x=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,L=null,C=-1,D=5,S=-1;function E(){return!(t.unstable_now()-S<D)}function M(){if(null!==L){var e=t.unstable_now();S=e;var r=!0;try{r=L(!0,e)}finally{r?N():(k=!1,L=null)}}else k=!1}if("function"==typeof v)N=function(){v(M)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,z=T.port2;T.port1.onmessage=M,N=function(){z.postMessage(null)}}else N=function(){p(M,0)};function I(e){L=e,k||(k=!0,N())}function A(e,r){C=p(function(){e(t.unstable_now())},r)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||x||(g=!0,I(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return s(d)},t.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var r=u;u=t;try{return e()}finally{u=r}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=u;u=e;try{return t()}finally{u=r}},t.unstable_scheduleCallback=function(e,a,n){var o=t.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?o+n:o,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:m++,callback:a,priorityLevel:e,startTime:n,expirationTime:l=n+l,sortIndex:-1},n>o?(e.sortIndex=n,r(c,e),null===s(d)&&e===s(c)&&(b?(f(C),C=-1):b=!0,A(y,n-o))):(e.sortIndex=l,r(d,e),g||x||(g=!0,I(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=u;return function(){var r=u;u=t;try{return e.apply(this,arguments)}finally{u=r}}}},982:(e,t,r)=>{e.exports=r(463)}},a={};function n(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}};return s[e](r,r.exports,n),r.exports}n.m=s,e=[],n.O=(t,r,s,a)=>{if(!r){var o=1/0;for(c=0;c<e.length;c++){for(var[r,s,a]=e[c],l=!0,i=0;i<r.length;i++)(!1&a||o>=a)&&Object.keys(n.O).every(e=>n.O[e](r[i]))?r.splice(i--,1):(l=!1,a<o&&(o=a));if(l){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[r,s,a]},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>e+".js",n.miniCssF=e=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},r="eyezen-chrome-extension:",n.l=(e,s,a,o)=>{if(t[e])t[e].push(s);else{var l,i;if(void 0!==a)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==r+a){l=m;break}}l||(i=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,n.nc&&l.setAttribute("nonce",n.nc),l.setAttribute("data-webpack",r+a),l.src=e),t[e]=[s];var h=(r,s)=>{l.onerror=l.onload=null,clearTimeout(u);var a=t[e];if(delete t[e],l.parentNode&&l.parentNode.removeChild(l),a&&a.forEach(e=>e(s)),r)return r(s)},u=setTimeout(h.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=h.bind(null,l.onerror),l.onload=h.bind(null,l.onload),i&&document.head.appendChild(l)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=r[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={575:0,820:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else if(820!=t){var a=new Promise((r,a)=>s=e[t]=[r,a]);r.push(s[2]=a);var o=n.p+n.u(t),l=new Error;n.l(o,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var a=r&&("load"===r.type?"missing":r.type),o=r&&r.target&&r.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+o+")",l.name="ChunkLoadError",l.type=a,l.request=o,s[1](l)}},"chunk-"+t,t)}else e[t]=0},n.O.j=t=>0===e[t];var t=(t,r)=>{var s,a,[o,l,i]=r,d=0;if(o.some(t=>0!==e[t])){for(s in l)n.o(l,s)&&(n.m[s]=l[s]);if(i)var c=i(n)}for(t&&t(r);d<o.length;d++)a=o[d],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(c)},r=self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var o=n.O(void 0,[644,123,820],()=>n(428));o=n.O(o)})();