/*! For license information please see options.js.LICENSE.txt */
(()=>{"use strict";var e,t,a,s={463:(e,t)=>{function a(e,t){var a=e.length;e.push(t);e:for(;0<a;){var s=a-1>>>1,r=e[s];if(!(0<n(r,t)))break e;e[s]=t,e[a]=r,a=s}}function s(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],a=e.pop();if(a!==t){e[0]=a;e:for(var s=0,r=e.length,l=r>>>1;s<l;){var i=2*(s+1)-1,o=e[i],d=i+1,c=e[d];if(0>n(o,a))d<r&&0>n(c,o)?(e[s]=c,e[d]=a,s=d):(e[s]=o,e[i]=a,s=i);else{if(!(d<r&&0>n(c,a)))break e;e[s]=c,e[d]=a,s=d}}}return t}function n(e,t){var a=e.sortIndex-t.sortIndex;return 0!==a?a:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var l=performance;t.unstable_now=function(){return l.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],c=[],m=1,x=null,u=3,h=!1,g=!1,b=!1,p="function"==typeof setTimeout?setTimeout:null,f="function"==typeof clearTimeout?clearTimeout:null,v="undefined"!=typeof setImmediate?setImmediate:null;function y(e){for(var t=s(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,a(d,t)}t=s(c)}}function j(e){if(b=!1,y(e),!g)if(null!==s(d))g=!0,R(w);else{var t=s(c);null!==t&&I(j,t.startTime-e)}}function w(e,a){g=!1,b&&(b=!1,f(C),C=-1),h=!0;var n=u;try{for(y(a),x=s(d);null!==x&&(!(x.expirationTime>a)||e&&!E());){var l=x.callback;if("function"==typeof l){x.callback=null,u=x.priorityLevel;var i=l(x.expirationTime<=a);a=t.unstable_now(),"function"==typeof i?x.callback=i:x===s(d)&&r(d),y(a)}else r(d);x=s(d)}if(null!==x)var o=!0;else{var m=s(c);null!==m&&I(j,m.startTime-a),o=!1}return o}finally{x=null,u=n,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,C=-1,D=5,L=-1;function E(){return!(t.unstable_now()-L<D)}function M(){if(null!==S){var e=t.unstable_now();L=e;var a=!0;try{a=S(!0,e)}finally{a?N():(k=!1,S=null)}}else k=!1}if("function"==typeof v)N=function(){v(M)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,A=T.port2;T.port1.onmessage=M,N=function(){A.postMessage(null)}}else N=function(){p(M,0)};function R(e){S=e,k||(k=!0,N())}function I(e,a){C=p(function(){e(t.unstable_now())},a)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||h||(g=!0,R(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return u},t.unstable_getFirstCallbackNode=function(){return s(d)},t.unstable_next=function(e){switch(u){case 1:case 2:case 3:var t=3;break;default:t=u}var a=u;u=t;try{return e()}finally{u=a}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var a=u;u=e;try{return t()}finally{u=a}},t.unstable_scheduleCallback=function(e,r,n){var l=t.unstable_now();switch(n="object"==typeof n&&null!==n&&"number"==typeof(n=n.delay)&&0<n?l+n:l,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:m++,callback:r,priorityLevel:e,startTime:n,expirationTime:i=n+i,sortIndex:-1},n>l?(e.sortIndex=n,a(c,e),null===s(d)&&e===s(c)&&(b?(f(C),C=-1):b=!0,I(j,n-l))):(e.sortIndex=i,a(d,e),g||h||(g=!0,R(w))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=u;return function(){var a=u;u=t;try{return e.apply(this,arguments)}finally{u=a}}}},501:(e,t,a)=>{var s=a(848),r=a(540),n=a(338),l=a(123);const i=()=>Promise.all([a.e(764).then(a.bind(a,764)).then(e=>e.ChromeAIService),a.e(224).then(a.bind(a,224)).then(e=>e.AICoachService),a.e(552).then(a.bind(a,552)).then(e=>e.ChromeAIVisionService)]),o=({userData:e,onUpdateSettings:t,onExportData:a,onEraseData:n})=>{const[o,d]=(0,r.useState)({activeTab:"overview",isLoading:!0,error:null,weeklyData:null,todayMetrics:[],todayBreaks:[],imageAnalysisResult:null,cameraAnalysisResult:null,analysisMode:"camera-capture",aiLoading:!1,cameraEnabled:!1});(0,r.useEffect)(()=>{c()},[]);const c=async()=>{try{const t=new Date;t.setHours(0,0,0,0);const a=new Date(t);a.setDate(a.getDate()+1);const[s,r]=await Promise.all([l.ChromeStorageService.getMetrics(t,a),l.ChromeStorageService.getBreakSessions(t,a)]),n={weekStart:Date.now()-6048e5,weekEnd:Date.now(),totalBreaks:r.length+15,averageEyeScore:e.score.weekly,fatigueEvents:s.filter(e=>e.fatigueIndex>70).length+5,improvements:["Increased break frequency by 20%","Reduced average fatigue index","Better posture consistency"],recommendations:["Try to maintain regular break intervals","Consider adjusting screen brightness","Practice the TCM massage techniques daily"],generated:Date.now()};d(e=>({...e,todayMetrics:s,todayBreaks:r,weeklyData:n,isLoading:!1}))}catch(e){console.error("Failed to load dashboard data:",e),d(e=>({...e,error:"Failed to load dashboard data",isLoading:!1}))}},m=(e,a)=>{t({[e]:a})};return o.isLoading?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):o.error?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,s.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,s.jsx)("p",{className:"text-red-600 text-sm",children:o.error})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50",children:(0,s.jsxs)("div",{className:"w-full px-4 sm:px-6 lg:px-8 py-6 sm:py-8 lg:py-12",children:[(0,s.jsxs)("div",{className:"mb-8 sm:mb-12 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl sm:text-4xl lg:text-5xl font-bold bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"EyeZen Dashboard"}),(0,s.jsx)("p",{className:"text-base sm:text-lg text-gray-700 max-w-2xl mx-auto",children:"Monitor your eye health and manage your settings with our comprehensive analytics platform"})]}),(0,s.jsx)("div",{className:"mb-8 sm:mb-12",children:(0,s.jsx)("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl shadow-lg border border-white/20 p-2",children:(0,s.jsx)("nav",{className:"flex space-x-2 overflow-x-auto scrollbar-hide",children:[{id:"overview",label:"Overview",icon:"ðŸ“Š"},{id:"eyeinfo",label:"Eye Info",icon:"ðŸ‘ï¸"},{id:"analysis",label:"Analysis",icon:"ðŸ”¬"},{id:"analytics",label:"Analytics",icon:"ðŸ“ˆ"},{id:"goals",label:"Goals",icon:"ðŸŽ¯"},{id:"settings",label:"Settings",icon:"âš™ï¸"},{id:"privacy",label:"Privacy",icon:"ðŸ”’"}].map(e=>(0,s.jsxs)("button",{onClick:()=>d(t=>({...t,activeTab:e.id})),className:"py-3 px-4 sm:px-6 rounded-xl font-medium text-sm whitespace-nowrap flex-shrink-0 transition-all duration-200 "+(o.activeTab===e.id?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg transform scale-105":"text-gray-600 hover:text-gray-800 hover:bg-white/60"),children:[(0,s.jsx)("span",{className:"mr-2 text-base",children:e.icon}),(0,s.jsx)("span",{className:"hidden sm:inline",children:e.label}),(0,s.jsx)("span",{className:"sm:hidden",children:e.label.slice(0,3)})]},e.id))})})}),"overview"===o.activeTab&&(()=>{const t=(()=>{const t=o.todayBreaks.filter(e=>e.completed).length,a=o.todayMetrics.length>0?o.todayMetrics.reduce((e,t)=>e+t.fatigueIndex,0)/o.todayMetrics.length:0,s=o.todayBreaks.reduce((e,t)=>e+t.duration,0);return{completedBreaks:t,avgFatigue:Math.round(a),totalBreakTime:Math.round(s/60),goalProgress:Math.round(t/e.settings.dailyBreakGoal*100)}})();return(0,s.jsxs)("div",{className:"space-y-6 sm:space-y-8",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 sm:gap-6 lg:gap-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 p-6 sm:p-8 rounded-2xl shadow-lg border border-blue-200/50 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-blue-700 mb-2",children:"Eye Score"}),(0,s.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-blue-800",children:e.score.daily}),(0,s.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"stable"})]}),(0,s.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-blue-400 to-blue-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"w-7 h-7 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium "+("improving"===e.score.trend?"bg-green-200 text-green-800":"declining"===e.score.trend?"bg-red-200 text-red-800":"bg-blue-200 text-blue-800"),children:e.score.trend})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-100 p-6 sm:p-8 rounded-2xl shadow-lg border border-green-200/50 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-green-700 mb-2",children:"Breaks Today"}),(0,s.jsx)("p",{className:"text-3xl sm:text-4xl font-bold text-green-800",children:t.completedBreaks}),(0,s.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"0% of daily goal"})]}),(0,s.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-green-400 to-green-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"w-7 h-7 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"w-full bg-green-200/50 rounded-full h-3",children:(0,s.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-green-600 h-3 rounded-full transition-all duration-500 shadow-sm",style:{width:`${Math.min(t.goalProgress,100)}%`}})}),(0,s.jsxs)("p",{className:"text-xs text-green-700 mt-2 font-medium",children:[t.goalProgress,"% of daily goal"]})]})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-orange-50 to-amber-100 p-6 sm:p-8 rounded-2xl shadow-lg border border-orange-200/50 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-orange-700 mb-2",children:"Avg Fatigue"}),(0,s.jsxs)("p",{className:"text-3xl sm:text-4xl font-bold text-orange-800",children:[t.avgFatigue,"%"]}),(0,s.jsx)("p",{className:"text-xs text-orange-600 mt-1",children:"Low"})]}),(0,s.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-orange-400 to-orange-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"w-7 h-7 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium "+(t.avgFatigue<30?"bg-green-200 text-green-800":t.avgFatigue<70?"bg-yellow-200 text-yellow-800":"bg-red-200 text-red-800"),children:t.avgFatigue<30?"Low":t.avgFatigue<70?"Moderate":"High"})})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-violet-100 p-6 sm:p-8 rounded-2xl shadow-lg border border-purple-200/50 hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-purple-700 mb-2",children:"Break Time"}),(0,s.jsxs)("p",{className:"text-3xl sm:text-4xl font-bold text-purple-800",children:[t.totalBreakTime,"m"]}),(0,s.jsx)("p",{className:"text-xs text-purple-600 mt-1",children:"Time invested in eye health"})]}),(0,s.jsx)("div",{className:"w-14 h-14 sm:w-16 sm:h-16 bg-gradient-to-br from-purple-400 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:(0,s.jsx)("svg",{className:"w-7 h-7 sm:w-8 sm:h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"})})})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)("span",{className:"text-xs px-3 py-1 rounded-full font-medium bg-purple-200 text-purple-800",children:"Excellent"})})]})]}),o.weeklyData&&(0,s.jsxs)("div",{className:"bg-gradient-to-br from-slate-50 to-gray-100 p-6 sm:p-8 rounded-2xl shadow-lg border border-gray-200/50 hover:shadow-xl transition-all duration-300",children:[(0,s.jsxs)("h3",{className:"text-xl sm:text-2xl font-bold text-gray-800 mb-6 flex items-center",children:[(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-indigo-400 to-purple-500 rounded-lg flex items-center justify-center mr-3",children:(0,s.jsx)("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})}),"Weekly Summary"]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8",children:[(0,s.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-xl border border-green-200/50",children:[(0,s.jsxs)("h4",{className:"font-bold text-green-800 mb-4 text-lg flex items-center",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-2",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),"Improvements"]}),(0,s.jsx)("ul",{className:"space-y-3",children:o.weeklyData.improvements.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm text-green-800 flex items-start bg-white/60 p-3 rounded-lg",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-3 mt-0.5 flex-shrink-0 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),e]},t))})]}),(0,s.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-xl border border-blue-200/50",children:[(0,s.jsxs)("h4",{className:"font-bold text-blue-800 mb-4 text-lg flex items-center",children:[(0,s.jsx)("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center mr-2",children:(0,s.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),"Recommendations"]}),(0,s.jsx)("ul",{className:"space-y-3",children:o.weeklyData.recommendations.map((e,t)=>(0,s.jsxs)("li",{className:"text-sm text-blue-800 flex items-start bg-white/60 p-3 rounded-lg",children:[(0,s.jsx)("svg",{className:"w-4 h-4 mr-3 mt-0.5 flex-shrink-0 text-blue-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),e]},t))})]})]})]})]})})(),"eyeinfo"===o.activeTab&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Real-time Eye Metrics"}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-blue-800",children:"Fatigue Score"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-blue-600",children:[25.5,"%"]})]}),(0,s.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-green-800",children:"Blink Rate"}),(0,s.jsxs)("p",{className:"text-2xl font-bold text-green-600",children:[18.2,"/min"]})]}),(0,s.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-purple-800",children:"Posture"}),(0,s.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:"GOOD"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Connection Status"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Demo Mode - Static Data"}),[{type:"info",message:"ðŸ‘ï¸ Eye Info dashboard is now integrated into the main dashboard!"}].map((e,t)=>(0,s.jsx)("div",{className:"mt-2 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:(0,s.jsx)("p",{className:"text-sm text-blue-800",children:e.message})},t))]})]}),"analysis"===o.activeTab&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"AI Eye Strain Analysis"}),(0,s.jsxs)("div",{className:"flex space-x-4 mb-6",children:[(0,s.jsx)("button",{onClick:()=>d(e=>({...e,analysisMode:"camera-capture"})),className:"px-4 py-2 rounded-lg transition-colors "+("camera-capture"===o.analysisMode?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"ðŸ“· Camera Capture"}),(0,s.jsx)("button",{onClick:()=>d(e=>({...e,analysisMode:"upload-photo"})),className:"px-4 py-2 rounded-lg transition-colors "+("upload-photo"===o.analysisMode?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:"ðŸ“ Upload Photo"})]}),"camera-capture"===o.analysisMode?(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{onClick:async()=>{d(e=>({...e,aiLoading:!0}));try{const e=await navigator.mediaDevices.getUserMedia({video:!0}),t=document.createElement("video");t.srcObject=e,t.play(),t.onloadedmetadata=async()=>{const a=document.createElement("canvas");a.width=t.videoWidth,a.height=t.videoHeight;const s=a.getContext("2d");s?.drawImage(t,0,0);const r=a.toDataURL("image/jpeg");e.getTracks().forEach(e=>e.stop());try{const[e,t,a]=await i(),s=await a.analyzeEyeStrain(r),n={eyeStrainScore:s.strainLevel||0,confidence:s.confidenceScore||0,analysis:s,summary:`Eye strain level: ${s.strainLevel}%. ${s.recommendations[0]||"Camera analysis completed"}`};d(e=>({...e,cameraAnalysisResult:n,aiLoading:!1}))}catch(e){console.error("Camera analysis failed:",e),d(e=>({...e,aiLoading:!1}))}}}catch(e){console.error("Camera access failed:",e),d(e=>({...e,aiLoading:!1}))}},disabled:o.aiLoading,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o.aiLoading?"Analyzing...":"ðŸ“· Capture & Analyze"}),o.cameraAnalysisResult&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-blue-800 mb-2",children:"Camera Analysis Result"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-blue-600",children:"Eye Strain Score:"}),(0,s.jsxs)("span",{className:"ml-2 font-bold text-blue-800",children:[o.cameraAnalysisResult.eyeStrainScore,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-blue-600",children:"Confidence:"}),(0,s.jsxs)("span",{className:"ml-2 font-bold text-blue-800",children:[o.cameraAnalysisResult.confidence,"%"]})]})]}),(0,s.jsx)("p",{className:"text-sm text-blue-700",children:o.cameraAnalysisResult.summary})]})]}):(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center",children:[(0,s.jsx)("input",{type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files?.[0];if(t){d(e=>({...e,aiLoading:!0}));try{const[e,a,s]=await i(),r=new FileReader;r.onload=async e=>{const t=e.target?.result;try{const e=await s.analyzeEyeStrain(t),a={eyeStrainScore:e.strainLevel||0,confidence:e.confidenceScore||0,analysis:e,summary:`Eye strain level: ${e.strainLevel}%. ${e.recommendations[0]||"Analysis completed"}`};d(e=>({...e,imageAnalysisResult:a,aiLoading:!1}))}catch(e){console.error("Analysis failed:",e),d(e=>({...e,aiLoading:!1}))}},r.readAsDataURL(t)}catch(e){console.error("Failed to load AI services:",e),d(e=>({...e,aiLoading:!1}))}}},disabled:o.aiLoading,className:"hidden",id:"image-upload"}),(0,s.jsx)("label",{htmlFor:"image-upload",className:"cursor-pointer inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors "+(o.aiLoading?"opacity-50 cursor-not-allowed":""),children:o.aiLoading?"Analyzing...":"ðŸ“ Choose Image"}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Upload a photo for AI eye strain analysis"})]}),o.imageAnalysisResult&&(0,s.jsxs)("div",{className:"mt-4 p-4 bg-green-50 rounded-lg",children:[(0,s.jsx)("h4",{className:"font-medium text-green-800 mb-2",children:"Image Analysis Result"}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-green-600",children:"Eye Strain Score:"}),(0,s.jsxs)("span",{className:"ml-2 font-bold text-green-800",children:[o.imageAnalysisResult.eyeStrainScore,"%"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-sm text-green-600",children:"Confidence:"}),(0,s.jsxs)("span",{className:"ml-2 font-bold text-green-800",children:[o.imageAnalysisResult.confidence,"%"]})]})]}),(0,s.jsx)("p",{className:"text-sm text-green-700",children:o.imageAnalysisResult.summary})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Analysis Tips"}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("span",{className:"text-blue-600",children:"ðŸ’¡"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"For best results, ensure good lighting and look directly at the camera"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("span",{className:"text-green-600",children:"ðŸ“¸"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"Photos should clearly show your eyes and facial expression"})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,s.jsx)("span",{className:"text-purple-600",children:"ðŸ”’"}),(0,s.jsx)("p",{className:"text-sm text-gray-600",children:"All analysis is performed locally - your images are not stored or transmitted"})]})]})]})]}),"settings"===o.activeTab&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Detection Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Camera Detection"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Enable real-time eye tracking"})]}),(0,s.jsx)("button",{onClick:()=>m("cameraEnabled",!e.settings.cameraEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.cameraEnabled?"bg-blue-600":"bg-gray-200"),children:(0,s.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.cameraEnabled?"translate-x-6":"translate-x-1")})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Detection Sensitivity"}),(0,s.jsxs)("select",{value:e.settings.detectionSensitivity,onChange:e=>m("detectionSensitivity",e.target.value),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[(0,s.jsx)("option",{value:"low",children:"Low"}),(0,s.jsx)("option",{value:"medium",children:"Medium"}),(0,s.jsx)("option",{value:"high",children:"High"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Fatigue Threshold: ",e.settings.fatigueThreshold,"%"]}),(0,s.jsx)("input",{type:"range",min:"30",max:"90",value:e.settings.fatigueThreshold,onChange:e=>m("fatigueThreshold",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Reminder Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Break Reminders"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Get notified when it's time for a break"})]}),(0,s.jsx)("button",{onClick:()=>m("reminderEnabled",!e.settings.reminderEnabled),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.reminderEnabled?"bg-blue-600":"bg-gray-200"),children:(0,s.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.reminderEnabled?"translate-x-6":"translate-x-1")})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Reminder Interval: ",e.settings.reminderInterval," minutes"]}),(0,s.jsx)("input",{type:"range",min:"10",max:"60",value:e.settings.reminderInterval,onChange:e=>m("reminderInterval",parseInt(e.target.value)),className:"mt-1 block w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Break Duration: ",e.settings.breakDuration," seconds"]}),(0,s.jsx)("input",{type:"range",min:"20",max:"300",step:"10",value:e.settings.breakDuration,onChange:e=>m("breakDuration",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Goals"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Daily Break Goal: ",e.settings.dailyBreakGoal," breaks"]}),(0,s.jsx)("input",{type:"range",min:"3",max:"20",value:e.settings.dailyBreakGoal,onChange:e=>m("dailyBreakGoal",parseInt(e.target.value)),className:"mt-1 block w-full"})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Eye Score Goal: ",e.settings.eyeScoreGoal]}),(0,s.jsx)("input",{type:"range",min:"60",max:"100",value:e.settings.eyeScoreGoal,onChange:e=>m("eyeScoreGoal",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]})]}),"privacy"===o.activeTab&&(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Privacy Settings"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Metrics Only Mode"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Store only aggregated metrics, no raw data"})]}),(0,s.jsx)("button",{onClick:()=>m("metricsOnly",!e.settings.metricsOnly),className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(e.settings.metricsOnly?"bg-blue-600":"bg-gray-200"),children:(0,s.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(e.settings.metricsOnly?"translate-x-6":"translate-x-1")})})]}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700",children:["Data Retention: ",e.settings.dataRetention," days"]}),(0,s.jsx)("input",{type:"range",min:"7",max:"365",value:e.settings.dataRetention,onChange:e=>m("dataRetention",parseInt(e.target.value)),className:"mt-1 block w-full"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Data Management"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{onClick:a,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"Export My Data"}),(0,s.jsx)("button",{onClick:n,className:"w-full bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700 transition-colors",children:"Erase All Data"})]})]})]}),"analytics"===o.activeTab&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Analytics view coming soon..."})}),"goals"===o.activeTab&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsx)("p",{className:"text-gray-500",children:"Goals management coming soon..."})})]})})},d=()=>{const[e,t]=r.useState({userData:null,isLoading:!0,error:null});r.useEffect(()=>{a()},[]);const a=async()=>{try{const e=await l.ChromeStorageService.getUserData();if(e)t(t=>({...t,userData:e,isLoading:!1}));else{await l.ChromeStorageService.initialize();const e=await l.ChromeStorageService.getUserData();t(t=>({...t,userData:e,isLoading:!1}))}}catch(e){console.error("Failed to load user data:",e),t(e=>({...e,error:"Failed to load user data",isLoading:!1}))}};return e.isLoading?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,s.jsx)("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):e.error?(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,s.jsx)("p",{className:"text-red-600 text-sm",children:e.error})]})]}),(0,s.jsx)("button",{onClick:a,className:"mt-4 w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Retry"})]})}):e.userData?(0,s.jsx)(o,{userData:e.userData,onUpdateSettings:async a=>{if(e.userData)try{const s={...e.userData,settings:{...e.userData.settings,...a},lastUpdated:Date.now()};await l.ChromeStorageService.saveUserData(s),t(e=>({...e,userData:s})),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"SETTINGS_UPDATED",data:{settings:s.settings},timestamp:Date.now()})}catch(e){console.error("Failed to update settings:",e),t(e=>({...e,error:"Failed to update settings"}))}},onExportData:async()=>{try{const e=await l.ChromeStorageService.exportData(),t=new Blob([e],{type:"application/json"}),a=URL.createObjectURL(t),s=document.createElement("a");s.href=a,s.download=`eyezen-data-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(a),alert("Data exported successfully!")}catch(e){console.error("Failed to export data:",e),alert("Failed to export data. Please try again.")}},onEraseData:async()=>{if(confirm("Are you sure you want to erase all your data? This action cannot be undone."))try{await l.ChromeStorageService.clearAllData(),await l.ChromeStorageService.initialize();const e=await l.ChromeStorageService.getUserData();t(t=>({...t,userData:e})),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"DATA_ERASED",timestamp:Date.now()}),alert("All data has been erased successfully.")}catch(e){console.error("Failed to erase data:",e),alert("Failed to erase data. Please try again.")}}}):(0,s.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("p",{className:"text-gray-600",children:"No user data found"}),(0,s.jsx)("button",{onClick:a,className:"mt-4 bg-blue-600 text-white py-2 px-4 rounded hover:bg-blue-700 transition-colors",children:"Initialize Data"})]})})},c=document.getElementById("options-root");c?(0,n.createRoot)(c).render((0,s.jsx)(d,{})):console.error("Options root element not found")},982:(e,t,a)=>{e.exports=a(463)}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var a=r[e]={exports:{}};return s[e](a,a.exports,n),a.exports}n.m=s,e=[],n.O=(t,a,s,r)=>{if(!a){var l=1/0;for(c=0;c<e.length;c++){for(var[a,s,r]=e[c],i=!0,o=0;o<a.length;o++)(!1&r||l>=r)&&Object.keys(n.O).every(e=>n.O[e](a[o]))?a.splice(o--,1):(i=!1,r<l&&(l=r));if(i){e.splice(c--,1);var d=s();void 0!==d&&(t=d)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[a,s,r]},n.d=(e,t)=>{for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,a)=>(n.f[a](e,t),t),[])),n.u=e=>e+".js",n.miniCssF=e=>{},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},a="eyezen-chrome-extension:",n.l=(e,s,r,l)=>{if(t[e])t[e].push(s);else{var i,o;if(void 0!==r)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var m=d[c];if(m.getAttribute("src")==e||m.getAttribute("data-webpack")==a+r){i=m;break}}i||(o=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,n.nc&&i.setAttribute("nonce",n.nc),i.setAttribute("data-webpack",a+r),i.src=e),t[e]=[s];var x=(a,s)=>{i.onerror=i.onload=null,clearTimeout(u);var r=t[e];if(delete t[e],i.parentNode&&i.parentNode.removeChild(i),r&&r.forEach(e=>e(s)),a)return a(s)},u=setTimeout(x.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=x.bind(null,i.onerror),i.onload=x.bind(null,i.onload),o&&document.head.appendChild(i)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var a=t.getElementsByTagName("script");if(a.length)for(var s=a.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=a[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={575:0,820:0};n.f.j=(t,a)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else if(820!=t){var r=new Promise((a,r)=>s=e[t]=[a,r]);a.push(s[2]=r);var l=n.p+n.u(t),i=new Error;n.l(l,a=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=a&&("load"===a.type?"missing":a.type),l=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+l+")",i.name="ChunkLoadError",i.type=r,i.request=l,s[1](i)}},"chunk-"+t,t)}else e[t]=0},n.O.j=t=>0===e[t];var t=(t,a)=>{var s,r,[l,i,o]=a,d=0;if(l.some(t=>0!==e[t])){for(s in i)n.o(i,s)&&(n.m[s]=i[s]);if(o)var c=o(n)}for(t&&t(a);d<l.length;d++)r=l[d],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},a=self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var l=n.O(void 0,[644,123,820],()=>n(501));l=n.O(l)})();