<!DOCTYPE html>
<html>
<head>
    <title>Debug Eye Health Scorer - Empty Metrics</title>
</head>
<body>
    <h1>Eye Health Scorer Debug - Empty Metrics</h1>
    <div id="results"></div>
    
    <script type="module">
        // Import the EyeHealthScorer
        import { EyeHealthScorer } from './core/metrics/index.ts';
        
        const resultsDiv = document.getElementById('results');
        
        // Test with empty metrics array
        console.log('Testing EyeHealthScorer with empty metrics...');
        const emptyResult = EyeHealthScorer.calculateScore([]);
        console.log('Empty metrics result:', emptyResult);
        
        resultsDiv.innerHTML = `
            <h2>Empty Metrics Test</h2>
            <p><strong>Overall Score:</strong> ${emptyResult.overall}</p>
            <p><strong>Components:</strong></p>
            <ul>
                <li>Eye Strain: ${emptyResult.components.eyeStrain}</li>
                <li>Blink Health: ${emptyResult.components.blinkHealth}</li>
                <li>Posture Health: ${emptyResult.components.postureHealth}</li>
                <li>Fatigue Level: ${emptyResult.components.fatigueLevel}</li>
            </ul>
            <p><strong>Trend:</strong> ${emptyResult.trend}</p>
            <p><strong>Recommendations:</strong> ${emptyResult.recommendations.join(', ')}</p>
        `;
        
        // Test with undefined/null
        try {
            const nullResult = EyeHealthScorer.calculateScore(null);
            console.log('Null metrics result:', nullResult);
        } catch (error) {
            console.error('Error with null metrics:', error);
            resultsDiv.innerHTML += `<p><strong>Null test error:</strong> ${error.message}</p>`;
        }
    </script>
</body>
</html>