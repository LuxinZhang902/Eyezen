(()=>{"use strict";var e,t={37:(e,t,s)=>{var r=s(848),n=s(540),a=s(338),i=s(235);const o=({breakType:e,onComplete:t,onSkip:s})=>{const[a,o]=(0,n.useState)({phase:"preparation",timeRemaining:m(e),currentActivity:null,completedActivities:[],massageStep:0,scriptContent:""}),l=(0,n.useRef)(null),c=(0,n.useRef)(null),d=(0,n.useRef)(!0);function m(e){switch(e){case i.BreakType.MICRO:return 20;case i.BreakType.SHORT:return 300;case i.BreakType.LONG:return 900;default:return 20}}(0,n.useEffect)(()=>("timer"===a.phase&&a.timeRemaining>0?l.current=setTimeout(()=>{d.current&&o(e=>({...e,timeRemaining:e.timeRemaining-1}))},1e3):0===a.timeRemaining&&"timer"===a.phase&&d.current&&u(),()=>{l.current&&(clearTimeout(l.current),l.current=null)}),[a.timeRemaining,a.phase]),(0,n.useEffect)(()=>()=>{d.current=!1,l.current&&(clearTimeout(l.current),l.current=null)},[]);const u=()=>{p(),d.current&&(e===i.BreakType.MICRO?o(e=>({...e,phase:"completion"})):o(e=>({...e,phase:"massage"})))},p=()=>{c.current&&c.current.play().catch(console.error)},x=()=>{const e=Object.values(i.MASSAGE_POINTS);a.massageStep<e.length-1?d.current&&o(e=>({...e,massageStep:e.massageStep+1})):h()},h=()=>{if(a.currentActivity&&d.current){const e={...a.currentActivity,completed:!0};o(t=>({...t,completedActivities:[...t.completedActivities,e],phase:"hydration",currentActivity:null}))}},g=async()=>{const e=["Take a deep breath and let your shoulders relax. You're doing great by taking this break.","Gently close your eyes and imagine a peaceful scene. Your eyes deserve this rest.","Feel the tension leaving your eye muscles as you blink slowly and deliberately."],t=e[Math.floor(Math.random()*e.length)];d.current&&o(e=>({...e,scriptContent:t}))},y=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("audio",{ref:c,preload:"auto",children:(0,r.jsx)("source",{src:"/assets/sounds/notification.mp3",type:"audio/mpeg"})}),"preparation"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Time for a Break!"}),(0,r.jsx)("p",{className:"text-gray-600",children:e===i.BreakType.MICRO?"Let's do a quick 20-second eye exercise":"Let's take a proper break with eye exercises and relaxation"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{onClick:()=>{const e={type:"exercise",name:"20-20-20 Rule",duration:a.timeRemaining,completed:!1,timestamp:Date.now()};d.current&&o(t=>({...t,phase:"timer",currentActivity:e}))},className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:["Start Break (",y(a.timeRemaining),")"]}),(0,r.jsx)("button",{onClick:s,className:"w-full bg-gray-300 text-gray-700 py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors",children:"Skip This Time"})]})]}),"timer"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsxs)("div",{className:"relative w-32 h-32 mx-auto",children:[(0,r.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#3b82f6",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:""+2*Math.PI*54,strokeDashoffset:""+2*Math.PI*54*(1-(m(e)-a.timeRemaining)/m(e)),className:"transition-all duration-1000 ease-linear"})]}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-800",children:y(a.timeRemaining)})})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Look at something 20 feet away"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Focus on a distant object to relax your eye muscles"}),(0,r.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-blue-800",children:"ðŸ’¡ Tip: Look out a window or at the far end of the room"})})]}),"massage"===a.phase&&(()=>{const e=(()=>{const e=Object.values(i.MASSAGE_POINTS);return e[a.massageStep]||e[0]})();return(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"TCM Eye Massage"}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 p-6 rounded-lg",children:[(0,r.jsx)("div",{className:"relative w-48 h-48 mx-auto mb-4 bg-white rounded-full shadow-lg",children:(0,r.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 200 200",children:[(0,r.jsx)("ellipse",{cx:"100",cy:"100",rx:"80",ry:"90",fill:"#fef3c7",stroke:"#d97706",strokeWidth:"2"}),(0,r.jsx)("ellipse",{cx:"75",cy:"80",rx:"15",ry:"8",fill:"white",stroke:"#374151",strokeWidth:"1"}),(0,r.jsx)("ellipse",{cx:"125",cy:"80",rx:"15",ry:"8",fill:"white",stroke:"#374151",strokeWidth:"1"}),(0,r.jsx)("circle",{cx:100+160*(e.position.x-.5),cy:100+180*(e.position.y-.5),r:"8",fill:"#ef4444",className:"animate-pulse"})]})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-800",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.chineseName}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:e.description}),(0,r.jsx)("div",{className:"text-sm text-green-700 space-y-1",children:e.benefits.map((e,t)=>(0,r.jsxs)("p",{children:["â€¢ ",e]},t))})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Gently massage this point for 30 seconds"}),(0,r.jsx)("button",{onClick:x,className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors",children:a.massageStep<Object.values(i.MASSAGE_POINTS).length-1?"Next Point":"Complete Massage"})]})]})})(),"hydration"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 2l3.09 6.26L22 9l-5 4.87L18.18 22 12 18.77 5.82 22 7 13.87 2 9l6.91-.74L12 2z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Hydration Time"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Take a moment to drink some water and refresh yourself"}),(0,r.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg space-y-4",children:[(0,r.jsx)("div",{className:"text-6xl",children:"ðŸ’§"}),(0,r.jsx)("p",{className:"text-blue-800",children:"Proper hydration helps maintain eye moisture and reduces strain"})]}),(0,r.jsx)("button",{onClick:()=>{const e={type:"hydration",name:"Hydration Break",duration:30,completed:!0,timestamp:Date.now()};d.current&&(o(t=>({...t,completedActivities:[...t.completedActivities,e],phase:"script"})),g())},className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:"I've Had Some Water"})]}),"script"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-purple-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Mindful Moment"}),(0,r.jsx)("div",{className:"bg-purple-50 p-6 rounded-lg",children:(0,r.jsxs)("p",{className:"text-lg text-purple-900 leading-relaxed italic",children:['"',a.scriptContent,'"']})}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Take a moment to reflect on this message"}),(0,r.jsx)("button",{onClick:()=>{const e={type:"script",name:"Mindfulness Script",duration:60,completed:!0,timestamp:Date.now()};d.current&&o(t=>({...t,completedActivities:[...t.completedActivities,e],phase:"completion"}))},className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors",children:"Continue"})]}),"completion"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Break Complete!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Great job taking care of your eyes. You completed:"}),(0,r.jsx)("div",{className:"bg-green-50 p-4 rounded-lg space-y-2",children:a.completedActivities.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-green-800",children:["âœ“ ",e.name]}),(0,r.jsxs)("span",{className:"text-green-600",children:[e.duration,"s"]})]},t))}),(0,r.jsx)("button",{onClick:()=>{t(a.completedActivities)},className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors",children:"Return to Work"})]})]})};var l=s(123);const c=()=>{const[e,t]=n.useState({breakType:i.BreakType.SHORT,isLoading:!0,error:null});n.useEffect(()=>{s()},[]);const s=async()=>{try{const e=new URLSearchParams(window.location.search).get("type")||i.BreakType.SHORT;t(t=>({...t,breakType:e,isLoading:!1}))}catch(e){console.error("Failed to initialize break page:",e),t(e=>({...e,error:"Failed to load break session",isLoading:!1}))}};return e.isLoading?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.error?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,r.jsx)("p",{className:"text-red-600 text-sm",children:e.error})]})]}),(0,r.jsx)("button",{onClick:()=>window.close(),className:"mt-4 w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Close"})]})}):(0,r.jsx)(o,{breakType:e.breakType,onComplete:async t=>{try{const s={id:Date.now().toString(),type:e.breakType,duration:t.reduce((e,t)=>e+t.duration,0),startTime:Date.now()-1e3*t.reduce((e,t)=>e+t.duration,0),endTime:Date.now(),completed:!0,activities:t};await l.ChromeStorageService.addBreakSession(s),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"BREAK_COMPLETED",data:{breakSession:s},timestamp:Date.now()}),window.close()}catch(e){console.error("Failed to save break session:",e),window.close()}},onSkip:async()=>{try{const t={id:Date.now().toString(),type:e.breakType,duration:0,startTime:Date.now(),endTime:Date.now(),completed:!1,activities:[]};await l.ChromeStorageService.addBreakSession(t),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"BREAK_SKIPPED",data:{breakSession:t},timestamp:Date.now()}),window.close()}catch(e){console.error("Failed to log skipped break:",e),window.close()}}})},d=document.getElementById("break-root");if(d){d.innerHTML="";try{(0,a.createRoot)(d).render((0,r.jsx)(c,{}))}catch(e){console.error("Failed to initialize break page React root:",e),d.innerHTML='\n      <div style="padding: 20px; text-align: center; color: red;">\n        <h2>Failed to load break page</h2>\n        <p>Please try refreshing the page or reloading the extension.</p>\n        <button onclick="window.close()" style="padding: 10px 20px; margin-top: 10px;">\n          Close\n        </button>\n      </div>\n    '}}else console.error("Break root element not found")}},s={};function r(e){var n=s[e];if(void 0!==n)return n.exports;var a=s[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,s,n,a)=>{if(!s){var i=1/0;for(d=0;d<e.length;d++){for(var[s,n,a]=e[d],o=!0,l=0;l<s.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every(e=>r.O[e](s[l]))?s.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(d--,1);var c=n();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,n,a]},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={856:0};r.O.j=t=>0===e[t];var t=(t,s)=>{var n,a,[i,o,l]=s,c=0;if(i.some(t=>0!==e[t])){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(l)var d=l(r)}for(t&&t(s);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},s=self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var n=r.O(void 0,[644,59],()=>r(37));n=r.O(n)})();