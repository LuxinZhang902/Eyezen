/*! For license information please see break.js.LICENSE.txt */
(()=>{"use strict";var e,t={37:(e,t,n)=>{var r=n(848),s=n(540),a=n(338),i=n(235);const o=({breakType:e,onComplete:t,onSkip:n})=>{const[a,o]=(0,s.useState)({phase:"preparation",timeRemaining:d(e),currentActivity:null,completedActivities:[],massageStep:0,scriptContent:""}),l=(0,s.useRef)(null),c=(0,s.useRef)(null);function d(e){switch(e){case i.BreakType.MICRO:return 20;case i.BreakType.SHORT:return 300;case i.BreakType.LONG:return 900;default:return 20}}(0,s.useEffect)(()=>("timer"===a.phase&&a.timeRemaining>0?l.current=setTimeout(()=>{o(e=>({...e,timeRemaining:e.timeRemaining-1}))},1e3):0===a.timeRemaining&&"timer"===a.phase&&u(),()=>{l.current&&clearTimeout(l.current)}),[a.timeRemaining,a.phase]);const u=()=>{m(),e===i.BreakType.MICRO?o(e=>({...e,phase:"completion"})):o(e=>({...e,phase:"massage"}))},m=()=>{c.current&&c.current.play().catch(console.error)},p=()=>{const e=Object.values(i.MASSAGE_POINTS);a.massageStep<e.length-1?o(e=>({...e,massageStep:e.massageStep+1})):h()},h=()=>{if(a.currentActivity){const e={...a.currentActivity,completed:!0};o(t=>({...t,completedActivities:[...t.completedActivities,e],phase:"hydration",currentActivity:null}))}},x=async()=>{const e=["Take a deep breath and let your shoulders relax. You're doing great by taking this break.","Gently close your eyes and imagine a peaceful scene. Your eyes deserve this rest.","Feel the tension leaving your eye muscles as you blink slowly and deliberately."],t=e[Math.floor(Math.random()*e.length)];o(e=>({...e,scriptContent:t}))},f=e=>`${Math.floor(e/60)}:${(e%60).toString().padStart(2,"0")}`;return(0,r.jsxs)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-6",children:[(0,r.jsx)("audio",{ref:c,preload:"auto",children:(0,r.jsx)("source",{src:"/assets/sounds/notification.mp3",type:"audio/mpeg"})}),"preparation"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsxs)("svg",{className:"w-10 h-10 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.065 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Time for a Break!"}),(0,r.jsx)("p",{className:"text-gray-600",children:e===i.BreakType.MICRO?"Let's do a quick 20-second eye exercise":"Let's take a proper break with eye exercises and relaxation"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("button",{onClick:()=>{const e={type:"exercise",name:"20-20-20 Rule",duration:a.timeRemaining,completed:!1,timestamp:Date.now()};o(t=>({...t,phase:"timer",currentActivity:e}))},className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:["Start Break (",f(a.timeRemaining),")"]}),(0,r.jsx)("button",{onClick:n,className:"w-full bg-gray-300 text-gray-700 py-2 px-6 rounded-lg hover:bg-gray-400 transition-colors",children:"Skip This Time"})]})]}),"timer"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsxs)("div",{className:"relative w-32 h-32 mx-auto",children:[(0,r.jsxs)("svg",{className:"w-32 h-32 transform -rotate-90",viewBox:"0 0 120 120",children:[(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),(0,r.jsx)("circle",{cx:"60",cy:"60",r:"54",fill:"none",stroke:"#3b82f6",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:""+2*Math.PI*54,strokeDashoffset:""+2*Math.PI*54*(1-(d(e)-a.timeRemaining)/d(e)),className:"transition-all duration-1000 ease-linear"})]}),(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-2xl font-bold text-gray-800",children:f(a.timeRemaining)})})]}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Look at something 20 feet away"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Focus on a distant object to relax your eye muscles"}),(0,r.jsx)("div",{className:"bg-blue-50 p-4 rounded-lg",children:(0,r.jsx)("p",{className:"text-sm text-blue-800",children:"ðŸ’¡ Tip: Look out a window or at the far end of the room"})})]}),"massage"===a.phase&&(()=>{const e=(()=>{const e=Object.values(i.MASSAGE_POINTS);return e[a.massageStep]||e[0]})();return(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"TCM Eye Massage"}),(0,r.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-blue-50 p-6 rounded-lg",children:[(0,r.jsx)("div",{className:"relative w-48 h-48 mx-auto mb-4 bg-white rounded-full shadow-lg",children:(0,r.jsxs)("svg",{className:"w-full h-full",viewBox:"0 0 200 200",children:[(0,r.jsx)("ellipse",{cx:"100",cy:"100",rx:"80",ry:"90",fill:"#fef3c7",stroke:"#d97706",strokeWidth:"2"}),(0,r.jsx)("ellipse",{cx:"75",cy:"80",rx:"15",ry:"8",fill:"white",stroke:"#374151",strokeWidth:"1"}),(0,r.jsx)("ellipse",{cx:"125",cy:"80",rx:"15",ry:"8",fill:"white",stroke:"#374151",strokeWidth:"1"}),(0,r.jsx)("circle",{cx:100+160*(e.position.x-.5),cy:100+180*(e.position.y-.5),r:"8",fill:"#ef4444",className:"animate-pulse"})]})}),(0,r.jsx)("h4",{className:"text-lg font-medium text-gray-800",children:e.name}),(0,r.jsx)("p",{className:"text-sm text-gray-600 mb-2",children:e.chineseName}),(0,r.jsx)("p",{className:"text-gray-700 mb-4",children:e.description}),(0,r.jsx)("div",{className:"text-sm text-green-700 space-y-1",children:e.benefits.map((e,t)=>(0,r.jsxs)("p",{children:["â€¢ ",e]},t))})]}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Gently massage this point for 30 seconds"}),(0,r.jsx)("button",{onClick:p,className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors",children:a.massageStep<Object.values(i.MASSAGE_POINTS).length-1?"Next Point":"Complete Massage"})]})]})})(),"hydration"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-blue-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 2l3.09 6.26L22 9l-5 4.87L18.18 22 12 18.77 5.82 22 7 13.87 2 9l6.91-.74L12 2z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Hydration Time"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Take a moment to drink some water and refresh yourself"}),(0,r.jsxs)("div",{className:"bg-blue-50 p-6 rounded-lg space-y-4",children:[(0,r.jsx)("div",{className:"text-6xl",children:"ðŸ’§"}),(0,r.jsx)("p",{className:"text-blue-800",children:"Proper hydration helps maintain eye moisture and reduces strain"})]}),(0,r.jsx)("button",{onClick:()=>{const e={type:"hydration",name:"Hydration Break",duration:30,completed:!0,timestamp:Date.now()};o(t=>({...t,completedActivities:[...t.completedActivities,e],phase:"script"})),x()},className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors",children:"I've Had Some Water"})]}),"script"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-purple-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"Mindful Moment"}),(0,r.jsx)("div",{className:"bg-purple-50 p-6 rounded-lg",children:(0,r.jsxs)("p",{className:"text-lg text-purple-900 leading-relaxed italic",children:['"',a.scriptContent,'"']})}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Take a moment to reflect on this message"}),(0,r.jsx)("button",{onClick:()=>{const e={type:"script",name:"Mindfulness Script",duration:60,completed:!0,timestamp:Date.now()};o(t=>({...t,completedActivities:[...t.completedActivities,e],phase:"completion"}))},className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg hover:bg-purple-700 transition-colors",children:"Continue"})]}),"completion"===a.phase&&(0,r.jsxs)("div",{className:"text-center space-y-6",children:[(0,r.jsx)("div",{className:"w-20 h-20 mx-auto bg-green-100 rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Break Complete!"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Great job taking care of your eyes. You completed:"}),(0,r.jsx)("div",{className:"bg-green-50 p-4 rounded-lg space-y-2",children:a.completedActivities.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,r.jsxs)("span",{className:"text-green-800",children:["âœ“ ",e.name]}),(0,r.jsxs)("span",{className:"text-green-600",children:[e.duration,"s"]})]},t))}),(0,r.jsx)("button",{onClick:()=>{t(a.completedActivities)},className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 transition-colors",children:"Return to Work"})]})]})};var l=n(123);const c=()=>{const[e,t]=s.useState({breakType:i.BreakType.SHORT,isLoading:!0,error:null});s.useEffect(()=>{n()},[]);const n=async()=>{try{const e=new URLSearchParams(window.location.search).get("type")||i.BreakType.SHORT;t(t=>({...t,breakType:e,isLoading:!1}))}catch(e){console.error("Failed to initialize break page:",e),t(e=>({...e,error:"Failed to load break session",isLoading:!1}))}};return e.isLoading?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.error?(0,r.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 max-w-md",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-red-800 font-medium",children:"Error"}),(0,r.jsx)("p",{className:"text-red-600 text-sm",children:e.error})]})]}),(0,r.jsx)("button",{onClick:()=>window.close(),className:"mt-4 w-full bg-red-600 text-white py-2 px-4 rounded hover:bg-red-700 transition-colors",children:"Close"})]})}):(0,r.jsx)(o,{breakType:e.breakType,onComplete:async t=>{try{const n={id:Date.now().toString(),type:e.breakType,duration:t.reduce((e,t)=>e+t.duration,0),startTime:Date.now()-1e3*t.reduce((e,t)=>e+t.duration,0),endTime:Date.now(),completed:!0,activities:t};await l.ChromeStorageService.addBreakSession(n),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"BREAK_COMPLETED",data:{breakSession:n},timestamp:Date.now()}),window.close()}catch(e){console.error("Failed to save break session:",e),window.close()}},onSkip:async()=>{try{const t={id:Date.now().toString(),type:e.breakType,duration:0,startTime:Date.now(),endTime:Date.now(),completed:!1,activities:[]};await l.ChromeStorageService.addBreakSession(t),"undefined"!=typeof chrome&&chrome.runtime&&chrome.runtime.sendMessage({type:"BREAK_SKIPPED",data:{breakSession:t},timestamp:Date.now()}),window.close()}catch(e){console.error("Failed to log skipped break:",e),window.close()}}})},d=document.getElementById("break-root");d?(0,a.createRoot)(d).render((0,r.jsx)(c,{})):console.error("Break root element not found")},463:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<a(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,i=s>>>1;r<i;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>a(l,n))c<s&&0>a(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>a(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,m=null,p=3,h=!1,x=!1,f=!1,y="function"==typeof setTimeout?setTimeout:null,g="function"==typeof clearTimeout?clearTimeout:null,b="undefined"!=typeof setImmediate?setImmediate:null;function v(e){for(var t=r(d);null!==t;){if(null===t.callback)s(d);else{if(!(t.startTime<=e))break;s(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function k(e){if(f=!1,v(e),!x)if(null!==r(c))x=!0,R(j);else{var t=r(d);null!==t&&B(k,t.startTime-e)}}function j(e,n){x=!1,f&&(f=!1,g(S),S=-1),h=!0;var a=p;try{for(v(n),m=r(c);null!==m&&(!(m.expirationTime>n)||e&&!_());){var i=m.callback;if("function"==typeof i){m.callback=null,p=m.priorityLevel;var o=i(m.expirationTime<=n);n=t.unstable_now(),"function"==typeof o?m.callback=o:m===r(c)&&s(c),v(n)}else s(c);m=r(c)}if(null!==m)var l=!0;else{var u=r(d);null!==u&&B(k,u.startTime-n),l=!1}return l}finally{m=null,p=a,h=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,N=!1,T=null,S=-1,C=5,M=-1;function _(){return!(t.unstable_now()-M<C)}function L(){if(null!==T){var e=t.unstable_now();M=e;var n=!0;try{n=T(!0,e)}finally{n?w():(N=!1,T=null)}}else N=!1}if("function"==typeof b)w=function(){b(L)};else if("undefined"!=typeof MessageChannel){var O=new MessageChannel,P=O.port2;O.port1.onmessage=L,w=function(){P.postMessage(null)}}else w=function(){y(L,0)};function R(e){T=e,N||(N=!0,w())}function B(e,n){S=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){x||h||(x=!0,R(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,s,a){var i=t.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:s,priorityLevel:e,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(e.sortIndex=a,n(d,e),null===r(c)&&e===r(d)&&(f?(g(S),S=-1):f=!0,B(k,a-i))):(e.sortIndex=o,n(c,e),x||h||(x=!0,R(j))),e},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},982:(e,t,n)=>{e.exports=n(463)}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.m=t,e=[],r.O=(t,n,s,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,s,a]=e[d],o=!0,l=0;l<n.length;l++)(!1&a||i>=a)&&Object.keys(r.O).every(e=>r.O[e](n[l]))?n.splice(l--,1):(o=!1,a<i&&(i=a));if(o){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,s,a]},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={856:0,820:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var s,a,[i,o,l]=n,c=0;if(i.some(t=>0!==e[t])){for(s in o)r.o(o,s)&&(r.m[s]=o[s]);if(l)var d=l(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},n=self.webpackChunkeyezen_chrome_extension=self.webpackChunkeyezen_chrome_extension||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s=r.O(void 0,[644,123,820],()=>r(37));s=r.O(s)})();